
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>ARM · 《Packer 中文手册》</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="大可不加冰">
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism-vsc-dark-plus.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-image-captions/image-captions.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../5.alicloud-ecs.html" />
    
    
    <link rel="prev" href="overview.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                        <b>1.1.</b>
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../1.what_is_packer/overview.html">
            
                <a href="../../1.what_is_packer/overview.html">
            
                    
                        <b>1.2.</b>
                    
                    什么是 Packer
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../../1.what_is_packer/1.immutable_infrasturcture.html">
            
                <a href="../../1.what_is_packer/1.immutable_infrasturcture.html">
            
                    
                        <b>1.2.1.</b>
                    
                    拥抱不可变的基础设施
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../../1.what_is_packer/2.what_is_packer.html">
            
                <a href="../../1.what_is_packer/2.what_is_packer.html">
            
                    
                        <b>1.2.2.</b>
                    
                    什么是 Packer
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../2.terminology.html">
            
                <a href="../../2.terminology.html">
            
                    
                        <b>1.3.</b>
                    
                    术语
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../3.install_packer.html">
            
                <a href="../../3.install_packer.html">
            
                    
                        <b>1.4.</b>
                    
                    安装 Packer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../4.cli/overview.html">
            
                <a href="../../4.cli/overview.html">
            
                    
                        <b>1.5.</b>
                    
                    命令行(CLI)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../../4.cli/1.init.html">
            
                <a href="../../4.cli/1.init.html">
            
                    
                        <b>1.5.1.</b>
                    
                    init
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../../4.cli/2.plugin/overview.html">
            
                <a href="../../4.cli/2.plugin/overview.html">
            
                    
                        <b>1.5.2.</b>
                    
                    plugin
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.2.1" data-path="../../4.cli/2.plugin/1.install.html">
            
                <a href="../../4.cli/2.plugin/1.install.html">
            
                    
                        <b>1.5.2.1.</b>
                    
                    install
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.2" data-path="../../4.cli/2.plugin/2.installed.html">
            
                <a href="../../4.cli/2.plugin/2.installed.html">
            
                    
                        <b>1.5.2.2.</b>
                    
                    installed
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.3" data-path="../../4.cli/2.plugin/3.remove.html">
            
                <a href="../../4.cli/2.plugin/3.remove.html">
            
                    
                        <b>1.5.2.3.</b>
                    
                    remove
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.4" data-path="../../4.cli/2.plugin/4.required.html">
            
                <a href="../../4.cli/2.plugin/4.required.html">
            
                    
                        <b>1.5.2.4.</b>
                    
                    required
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../../4.cli/3.build.html">
            
                <a href="../../4.cli/3.build.html">
            
                    
                        <b>1.5.3.</b>
                    
                    build
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../../4.cli/4.console.html">
            
                <a href="../../4.cli/4.console.html">
            
                    
                        <b>1.5.4.</b>
                    
                    console
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../../4.cli/5.fix.html">
            
                <a href="../../4.cli/5.fix.html">
            
                    
                        <b>1.5.5.</b>
                    
                    fix
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="../../4.cli/6.fmt.html">
            
                <a href="../../4.cli/6.fmt.html">
            
                    
                        <b>1.5.6.</b>
                    
                    fmt
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="../../4.cli/7.inspect.html">
            
                <a href="../../4.cli/7.inspect.html">
            
                    
                        <b>1.5.7.</b>
                    
                    inspect
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="../../4.cli/8.validate.html">
            
                <a href="../../4.cli/8.validate.html">
            
                    
                        <b>1.5.8.</b>
                    
                    validate
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../../5.template/overview.html">
            
                <a href="../../5.template/overview.html">
            
                    
                        <b>1.6.</b>
                    
                    模板
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../../5.template/1.hcl/overview.html">
            
                <a href="../../5.template/1.hcl/overview.html">
            
                    
                        <b>1.6.1.</b>
                    
                    HCL 模板
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1.1" data-path="../../5.template/1.hcl/1.blocks/overview.html">
            
                <a href="../../5.template/1.hcl/1.blocks/overview.html">
            
                    
                        <b>1.6.1.1.</b>
                    
                    代码块
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1.1.1" data-path="../../5.template/1.hcl/1.blocks/1.build/overview.html">
            
                <a href="../../5.template/1.hcl/1.blocks/1.build/overview.html">
            
                    
                        <b>1.6.1.1.1.</b>
                    
                    build
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1.1.1.1" data-path="../../5.template/1.hcl/1.blocks/1.build/1.hcp_packer_registry.html">
            
                <a href="../../5.template/1.hcl/1.blocks/1.build/1.hcp_packer_registry.html">
            
                    
                        <b>1.6.1.1.1.1.</b>
                    
                    hcp_packer_registry
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.1.1.2" data-path="../../5.template/1.hcl/1.blocks/1.build/2.source.html">
            
                <a href="../../5.template/1.hcl/1.blocks/1.build/2.source.html">
            
                    
                        <b>1.6.1.1.1.2.</b>
                    
                    source
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.1.1.3" data-path="../../5.template/1.hcl/1.blocks/1.build/3.provisioner.html">
            
                <a href="../../5.template/1.hcl/1.blocks/1.build/3.provisioner.html">
            
                    
                        <b>1.6.1.1.1.3.</b>
                    
                    provisioner
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.1.1.4" data-path="../../5.template/1.hcl/1.blocks/1.build/4.post-processor.html">
            
                <a href="../../5.template/1.hcl/1.blocks/1.build/4.post-processor.html">
            
                    
                        <b>1.6.1.1.1.4.</b>
                    
                    post-processor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.1.1.5" data-path="../../5.template/1.hcl/1.blocks/1.build/5.post-processors.html">
            
                <a href="../../5.template/1.hcl/1.blocks/1.build/5.post-processors.html">
            
                    
                        <b>1.6.1.1.1.5.</b>
                    
                    post-processors
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.1.1.2" data-path="../../5.template/1.hcl/1.blocks/2.locals.html">
            
                <a href="../../5.template/1.hcl/1.blocks/2.locals.html">
            
                    
                        <b>1.6.1.1.2.</b>
                    
                    locals
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.1.3" data-path="../../5.template/1.hcl/1.blocks/3.source.html">
            
                <a href="../../5.template/1.hcl/1.blocks/3.source.html">
            
                    
                        <b>1.6.1.1.3.</b>
                    
                    source
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.1.4" data-path="../../5.template/1.hcl/1.blocks/4.variable.html">
            
                <a href="../../5.template/1.hcl/1.blocks/4.variable.html">
            
                    
                        <b>1.6.1.1.4.</b>
                    
                    variable
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.1.5" data-path="../../5.template/1.hcl/1.blocks/5.packer.html">
            
                <a href="../../5.template/1.hcl/1.blocks/5.packer.html">
            
                    
                        <b>1.6.1.1.5.</b>
                    
                    packer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.1.6" data-path="../../5.template/1.hcl/1.blocks/6.data.html">
            
                <a href="../../5.template/1.hcl/1.blocks/6.data.html">
            
                    
                        <b>1.6.1.1.6.</b>
                    
                    data
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.1.2" data-path="../../5.template/1.hcl/2.variables.html">
            
                <a href="../../5.template/1.hcl/2.variables.html">
            
                    
                        <b>1.6.1.2.</b>
                    
                    输入变量
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.3" data-path="../../5.template/1.hcl/3.locals.html">
            
                <a href="../../5.template/1.hcl/3.locals.html">
            
                    
                        <b>1.6.1.3.</b>
                    
                    局部变量
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.4" data-path="../../5.template/1.hcl/4.contextual_variables.html">
            
                <a href="../../5.template/1.hcl/4.contextual_variables.html">
            
                    
                        <b>1.6.1.4.</b>
                    
                    上下文变量
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.5" data-path="../../5.template/1.hcl/5.data_sources.html">
            
                <a href="../../5.template/1.hcl/5.data_sources.html">
            
                    
                        <b>1.6.1.5.</b>
                    
                    数据源
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.6" data-path="../../5.template/1.hcl/6.path_variables.html">
            
                <a href="../../5.template/1.hcl/6.path_variables.html">
            
                    
                        <b>1.6.1.6.</b>
                    
                    路径变量
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.7" data-path="../../5.template/1.hcl/7.syntax.html">
            
                <a href="../../5.template/1.hcl/7.syntax.html">
            
                    
                        <b>1.6.1.7.</b>
                    
                    语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.8" data-path="../../5.template/1.hcl/8.only_except.html">
            
                <a href="../../5.template/1.hcl/8.only_except.html">
            
                    
                        <b>1.6.1.8.</b>
                    
                    Only 和 Except
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.9" data-path="../../5.template/1.hcl/9.expression.html">
            
                <a href="../../5.template/1.hcl/9.expression.html">
            
                    
                        <b>1.6.1.9.</b>
                    
                    表达式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.10" data-path="../../5.template/1.hcl/10.json_syntax.html">
            
                <a href="../../5.template/1.hcl/10.json_syntax.html">
            
                    
                        <b>1.6.1.10.</b>
                    
                    JSON 语法
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../../6.communicators/overview.html">
            
                <a href="../../6.communicators/overview.html">
            
                    
                        <b>1.7.</b>
                    
                    通信器
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../../6.communicators/1.ssh.html">
            
                <a href="../../6.communicators/1.ssh.html">
            
                    
                        <b>1.7.1.</b>
                    
                    SSH
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../../6.communicators/2.winrm.html">
            
                <a href="../../6.communicators/2.winrm.html">
            
                    
                        <b>1.7.2.</b>
                    
                    WinRM
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../overview.html">
            
                <a href="../overview.html">
            
                    
                        <b>1.8.</b>
                    
                    构建器
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../1.file.html">
            
                <a href="../1.file.html">
            
                    
                        <b>1.8.1.</b>
                    
                    File Builder
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../2.null.html">
            
                <a href="../2.null.html">
            
                    
                        <b>1.8.2.</b>
                    
                    Null Builder
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../3.aws/overview.html">
            
                <a href="../3.aws/overview.html">
            
                    
                        <b>1.8.3.</b>
                    
                    Aws
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.3.1" data-path="../3.aws/1.ebs.html">
            
                <a href="../3.aws/1.ebs.html">
            
                    
                        <b>1.8.3.1.</b>
                    
                    ebs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="overview.html">
            
                <a href="overview.html">
            
                    
                        <b>1.8.4.</b>
                    
                    Azure
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.8.4.1" data-path="1.arm.html">
            
                <a href="1.arm.html">
            
                    
                        <b>1.8.4.1.</b>
                    
                    ARM
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="../5.alicloud-ecs.html">
            
                <a href="../5.alicloud-ecs.html">
            
                    
                        <b>1.8.5.</b>
                    
                    Alicloud
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../../8.data_sources/overview.html">
            
                <a href="../../8.data_sources/overview.html">
            
                    
                        <b>1.9.</b>
                    
                    数据源
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../../8.data_sources/1.http.html">
            
                <a href="../../8.data_sources/1.http.html">
            
                    
                        <b>1.9.1.</b>
                    
                    HTTP
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../../9.provisioners/overview.html">
            
                <a href="../../9.provisioners/overview.html">
            
                    
                        <b>1.10.</b>
                    
                    配置器
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../../9.provisioners/1.break_point.html">
            
                <a href="../../9.provisioners/1.break_point.html">
            
                    
                        <b>1.10.1.</b>
                    
                    断点
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../../9.provisioners/2.file.html">
            
                <a href="../../9.provisioners/2.file.html">
            
                    
                        <b>1.10.2.</b>
                    
                    文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../../9.provisioners/3.powershell.html">
            
                <a href="../../9.provisioners/3.powershell.html">
            
                    
                        <b>1.10.3.</b>
                    
                    PowerShell
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="../../9.provisioners/4.shell.html">
            
                <a href="../../9.provisioners/4.shell.html">
            
                    
                        <b>1.10.4.</b>
                    
                    Shell
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="../../9.provisioners/5.shell-local.html">
            
                <a href="../../9.provisioners/5.shell-local.html">
            
                    
                        <b>1.10.5.</b>
                    
                    Local Shell
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="../../9.provisioners/6.windows-shell.html">
            
                <a href="../../9.provisioners/6.windows-shell.html">
            
                    
                        <b>1.10.6.</b>
                    
                    Windows Shell
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.7" data-path="../../9.provisioners/7.windows-restart.html">
            
                <a href="../../9.provisioners/7.windows-restart.html">
            
                    
                        <b>1.10.7.</b>
                    
                    Windows Restart
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../../10.post-processors/overview.html">
            
                <a href="../../10.post-processors/overview.html">
            
                    
                        <b>1.11.</b>
                    
                    后处理器
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../../10.post-processors/1.artifice.html">
            
                <a href="../../10.post-processors/1.artifice.html">
            
                    
                        <b>1.11.1.</b>
                    
                    Artifice
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="../../10.post-processors/2.compress.html">
            
                <a href="../../10.post-processors/2.compress.html">
            
                    
                        <b>1.11.2.</b>
                    
                    Compress
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="../../10.post-processors/3.checksum.html">
            
                <a href="../../10.post-processors/3.checksum.html">
            
                    
                        <b>1.11.3.</b>
                    
                    Checksum
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.4" data-path="../../10.post-processors/4.docker-push.html">
            
                <a href="../../10.post-processors/4.docker-push.html">
            
                    
                        <b>1.11.4.</b>
                    
                    Docker Push
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.5" data-path="../../10.post-processors/5.manifest.html">
            
                <a href="../../10.post-processors/5.manifest.html">
            
                    
                        <b>1.11.5.</b>
                    
                    Manifest
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.6" data-path="../../10.post-processors/6.local_shell.html">
            
                <a href="../../10.post-processors/6.local_shell.html">
            
                    
                        <b>1.11.6.</b>
                    
                    Local Shell
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../../11.postscript/overview.html">
            
                <a href="../../11.postscript/overview.html">
            
                    
                        <b>1.12.</b>
                    
                    后记
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../../11.postscript/1.html">
            
                <a href="../../11.postscript/1.html">
            
                    
                        <b>1.12.1.</b>
                    
                    中国的出路在于出海
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../../11.postscript/2.html">
            
                <a href="../../11.postscript/2.html">
            
                    
                        <b>1.12.2.</b>
                    
                    真后记
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >ARM</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="azure-resource-manager-&#x6784;&#x5EFA;&#x5668;">Azure Resource Manager &#x6784;&#x5EFA;&#x5668;</h1>
<p><a href="https://developer.hashicorp.com/packer/plugins/builders/azure/arm" target="_blank"><em>&#x539F;&#x6587;</em></a></p>
<hr>
<p>&#x7C7B;&#x578B;&#xFF1A;<code>azure-arm</code> Artifact BuilderId&#xFF1A;<code>Azure.ResourceManagement.VMImage</code></p>
<p>Packer &#x652F;&#x6301;&#x5728; <a href="https://azure.microsoft.com/en-us/documentation/articles/resource-group-overview/" target="_blank">Azure &#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x5668;</a>&#x4E2D;&#x6784;&#x5EFA;&#x865A;&#x62DF;&#x786C;&#x76D8; (VHD) &#x548C;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x3002; Azure &#x5728;&#x524D; <a href="https://azure.microsoft.com/en-us/free/" target="_blank">30 &#x5929;&#x4E3A;&#x65B0;&#x7528;&#x6237;&#x63D0;&#x4F9B; 200 &#x7F8E;&#x5143;&#x7684;&#x4FE1;&#x7528;&#x989D;&#x5EA6;</a>&#xFF1B;&#x4E4B;&#x540E;&#xFF0C;&#x60A8;&#x5C06;&#x627F;&#x62C5;&#x4F7F;&#x7528; Packer &#x6784;&#x5EFA;&#x548C;&#x5B58;&#x50A8;&#x865A;&#x62DF;&#x673A;&#x7684;&#x8D39;&#x7528;&#x3002;</p>
<p>Azure &#x7ED3;&#x5408;&#x4F7F;&#x7528; OAuth &#x548C; Active Directory &#x6765;&#x6388;&#x6743;&#x5BF9; ARM API &#x7684;&#x8BF7;&#x6C42;&#x3002;&#x4E86;&#x89E3;&#x5982;&#x4F55;<a href="overview.html#azure-&#x8EAB;&#x4EFD;&#x8BA4;&#x8BC1;">&#x914D;&#x7F6E;&#x8BBF;&#x95EE; ARM &#x7684;&#x6388;&#x6743;</a>&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x7684;&#x6587;&#x6863;&#x5F15;&#x7528;&#x4E86; <a href="https://azure.microsoft.com/en-us/documentation/articles/xplat-cli-install/" target="_blank">Azure CLI</a> &#x7684;&#x547D;&#x4EE4;&#x8F93;&#x51FA;&#x3002;</p>
<h2 id="&#x914D;&#x7F6E;&#x53C2;&#x8003;">&#x914D;&#x7F6E;&#x53C2;&#x8003;</h2>
<p>&#x6784;&#x5EFA;&#x5668;&#x6709;&#x8BB8;&#x591A;&#x53EF;&#x7528;&#x7684;&#x914D;&#x7F6E;&#x9009;&#x9879;&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x4ECE;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x53C2;&#x6570;&#x5F00;&#x59CB;&#x4ECB;&#x7ECD;&#xFF0C;&#x7136;&#x540E;&#x662F; Azure ARM &#x6784;&#x5EFA;&#x5668;&#x7279;&#x6709;&#x7684;&#x9009;&#x9879;&#x3002;&#x9664;&#x4E86;&#x6B64;&#x5904;&#x5217;&#x51FA;&#x7684;&#x9009;&#x9879;&#x4E4B;&#x5916;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x4E3A;&#x6B64;&#x6784;&#x5EFA;&#x5668;&#x914D;&#x7F6E;<a href="../../6.communicators/overview.html">&#x901A;&#x4FE1;&#x5668;</a>&#x3002;</p>
<h3 id="&#x8EAB;&#x4EFD;&#x8BA4;&#x8BC1;&#x9009;&#x9879;">&#x8EAB;&#x4EFD;&#x8BA4;&#x8BC1;&#x9009;&#x9879;</h3>
<p>&#x5728;&#x914D;&#x7F6E;&#x4E2D;&#x5141;&#x8BB8;&#x901A;&#x8FC7;&#x591A;&#x79CD;&#x65B9;&#x5F0F;&#x5BF9; Azure &#x5BA2;&#x6237;&#x7AEF;&#x8FDB;&#x884C;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x3002;&#x5F53;&#x6307;&#x5B9A; <code>client_id</code> &#x548C; <code>subscription_id</code> &#x4EE5;&#x53CA;&#x4EE5;&#x4E0B;&#x4E00;&#x9879;&#x4E14;&#x4EC5;&#x4E00;&#x9879;&#x65F6;&#xFF1A;<code>client_secret</code>&#x3001;<code>client_jwt</code>&#x3001;<code>client_cert_path</code> &#x2014;&#x2014; Packer &#x5C06;&#x4F7F;&#x7528;&#x6307;&#x5B9A;&#x7684; Azure Active Directory (AAD) &#x670D;&#x52A1;&#x4E3B;&#x4F53; (SP)&#x3002;&#x5982;&#x679C;&#x4EC5;&#x6307;&#x5B9A;&#x4E86; <code>use_interactive_auth</code>&#xFF0C;Packer &#x5C06;&#x5C1D;&#x8BD5;&#x4EE5;&#x4EA4;&#x4E92;&#x65B9;&#x5F0F;&#x767B;&#x5F55;&#x5F53;&#x524D;&#x7528;&#x6237;&#xFF08;&#x4EE4;&#x724C;&#x5C06;&#x88AB;&#x7F13;&#x5B58;&#xFF09;&#x3002;&#x5982;&#x679C;&#x4E0A;&#x8FF0;&#x9009;&#x9879;&#x5747;&#x672A;&#x8BBE;&#x7F6E;&#xFF0C;Packer &#x5C06;&#x5C1D;&#x8BD5;&#x4F7F;&#x7528;&#x8FD0;&#x884C; Packer &#x7684;&#x865A;&#x62DF;&#x673A;&#x4E0A;&#x9644;&#x52A0;&#x7684;&#x6258;&#x7BA1;&#x8EAB;&#x4EFD;&#x548C;&#x8BA2;&#x9605;&#x3002;&#x8FD9;&#x4EC5;&#x5728; Packer &#x5728;&#x5177;&#x6709; System Assigned &#x6216; User Assigned &#x7684;&#x6258;&#x7BA1;&#x8EAB;&#x4EFD;&#x7684; Azure &#x865A;&#x62DF;&#x673A;&#x4E0A;&#x8FD0;&#x884C;&#x65F6;&#x624D;&#x6709;&#x6548;&#x3002;</p>
<h4 id="&#x6258;&#x7BA1;&#x8EAB;&#x4EFD;">&#x6258;&#x7BA1;&#x8EAB;&#x4EFD;</h4>
<p>&#x5982;&#x679C;&#x5728;&#x5177;&#x6709;&#x6258;&#x7BA1;&#x8EAB;&#x4EFD;&#x7684; Azure &#x865A;&#x62DF;&#x673A;&#x4E0A;&#x8FD0;&#x884C; Packer&#xFF0C;&#x5219;&#x65E0;&#x9700;&#x6307;&#x5B9A;&#x4EFB;&#x4F55;&#x5176;&#x4ED6;&#x914D;&#x7F6E;&#x9009;&#x9879;&#x3002;&#x56E0;&#x4E3A; Packer &#x5C06;&#x5C1D;&#x8BD5;&#x4F7F;&#x7528;&#x8FD0;&#x884C; Packer &#x7684;&#x865A;&#x62DF;&#x673A;&#x7684;&#x6258;&#x7BA1;&#x8EAB;&#x4EFD;&#x548C;&#x8BA2;&#x9605;&#x3002;</p>
<p>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E; <code>subscription_id</code> &#x4F7F;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x8BA2;&#x9605;&#x3002;&#x5982;&#x679C;&#x60A8;&#x7684;&#x865A;&#x62DF;&#x673A;&#x6709;&#x591A;&#x4E2A;&#x7528;&#x6237;&#x5206;&#x914D;&#x7684;&#x6258;&#x7BA1;&#x8EAB;&#x4EFD;&#xFF0C;&#x60A8;&#x4E5F;&#x9700;&#x8981;&#x8BBE;&#x7F6E; <code>client_id</code>&#x3002;</p>
<h3 id="&#x4EA4;&#x4E92;&#x5F0F;&#x7528;&#x6237;&#x767B;&#x5F55;">&#x4EA4;&#x4E92;&#x5F0F;&#x7528;&#x6237;&#x767B;&#x5F55;</h3>
<p>&#x8981;&#x4F7F;&#x7528;&#x4EA4;&#x4E92;&#x5F0F;&#x7528;&#x6237;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#xFF0C;&#x60A8;&#x5E94;&#x8BE5;&#x4EC5;&#x8BBE;&#x7F6E; <code>use_interactive_auth</code>&#x3002; Packer &#x5C06;&#x4F7F;&#x7528;&#x7F13;&#x5B58;&#x7684;&#x51ED;&#x636E;&#x6216;&#x5C06;&#x60A8;&#x91CD;&#x5B9A;&#x5411;&#x5230;&#x7F51;&#x7AD9;&#x8FDB;&#x884C;&#x767B;&#x5F55;&#x3002;</p>
<h3 id="&#x670D;&#x52A1;&#x4E3B;&#x4F53;">&#x670D;&#x52A1;&#x4E3B;&#x4F53;</h3>
<p>&#x8981;&#x4F7F;&#x7528;<a href="overview.html#azure-active-directory-&#x670D;&#x52A1;&#x4E3B;&#x4F53;">&#x670D;&#x52A1;&#x4E3B;&#x4F53;</a>&#xFF0C;&#x60A8;&#x5E94;&#x8BE5;&#x6307;&#x5B9A; <code>subscription_id</code>&#x3001;<code>client_id</code> &#x4EE5;&#x53CA; <code>client_secret</code>&#x3001;<code>client_cert_path</code> &#x6216; <code>client_jwt</code> &#x4E4B;&#x4E00;&#x3002;</p>
<ul>
<li><code>subscription_id</code> (string) - &#x6267;&#x884C;&#x6784;&#x5EFA;&#x6240;&#x4F7F;&#x7528;&#x7684;&#x8BA2;&#x9605; Id&#x3002; <strong><code>client_id</code> &#x4E2D;&#x6307;&#x5B9A;&#x7684;&#x670D;&#x52A1;&#x4E3B;&#x4F53;&#x5FC5;&#x987B;&#x5177;&#x6709;&#x5BF9;&#x6B64;&#x8BA2;&#x9605;&#x7684;&#x5B8C;&#x5168;&#x8BBF;&#x95EE;&#x6743;&#x9650;&#xFF0C;&#x9664;&#x975E;&#x6307;&#x5B9A;&#x4E86; <code>build_resource_group_name</code> &#x9009;&#x9879;&#xFF0C;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5B83;&#x9700;&#x8981;&#x62E5;&#x6709;&#x5BF9; <code>build_resource_group_name</code> &#x53C2;&#x6570;&#x4E2D;&#x6307;&#x5B9A;&#x7684;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x7684;&#x8D44;&#x6E90;&#x7EC4;&#x7684;&#x6240;&#x6709;&#x8005;&#x8BBF;&#x95EE;&#x6743;&#x9650;&#x3002;</strong></li>
<li><code>client_id</code>&#xFF08;string&#xFF09;- &#x4E0E;&#x60A8;&#x7684;&#x6784;&#x5EFA;&#x5668;&#x5173;&#x8054;&#x7684; Active Directory &#x670D;&#x52A1;&#x4E3B;&#x4F53;&#x3002;</li>
<li><code>client_secret</code>&#xFF08;string&#xFF09;- &#x60A8;&#x7684;&#x670D;&#x52A1;&#x4E3B;&#x4F53;&#x7684;&#x5BC6;&#x7801;&#x6216;&#x673A;&#x5BC6;&#x3002;</li>
<li><code>client_cert_path</code>&#xFF08;string&#xFF09;- &#x5305;&#x542B;&#x670D;&#x52A1;&#x4E3B;&#x4F53;&#x7684;&#x8BC1;&#x4E66;&#x548C;&#x79C1;&#x94A5;&#x7684; PEM &#x6587;&#x4EF6;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</li>
<li><code>client_cert_token_timeout</code> (duration string | ex: <code>&quot;1h30m12s&quot;</code>) - &#x5728;&#x4F7F;&#x7528; <code>client_cert_path</code> &#x65F6;&#x521B;&#x5EFA;&#x7684;&#x4EE4;&#x724C;&#x4E0A;&#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x7684;&#x65F6;&#x95F4;&#x3002;</li>
<li><code>client_jwt</code>&#xFF08;string&#xFF09;- &#x4F7F;&#x7528;&#x4E0E;&#x60A8;&#x7684;&#x670D;&#x52A1;&#x4E3B;&#x4F53;&#x4E3B;&#x4F53;&#x5173;&#x8054;&#x7684;&#x8BC1;&#x4E66;&#x7B7E;&#x7F72;&#x7684; JWT&#x3002;&#x6709;&#x5173;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605; <a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/active-directory-certificate-credentials" target="_blank">Azure Active Directory &#x6587;&#x6863;</a>&#x3002;</li>
</ul>
<h2 id="azure-arm-&#x6784;&#x5EFA;&#x5668;&#x7279;&#x5B9A;&#x9009;&#x9879;">Azure ARM &#x6784;&#x5EFA;&#x5668;&#x7279;&#x5B9A;&#x9009;&#x9879;</h2>
<p>Azure &#x6784;&#x5EFA;&#x5668;&#x53EF;&#x4EE5;&#x521B;&#x5EFA; VHD&#x3001;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x6216;&#x521B;&#x5EFA;&#x5171;&#x4EAB;&#x955C;&#x50CF;&#x5E93;&#x3002;&#x5982;&#x679C;&#x8981;&#x521B;&#x5EFA; VHD&#xFF0C;&#x5219;<strong>&#x5FC5;&#x987B;</strong>&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x73B0;&#x5B58;&#x7684; VHD&#x3002;&#x540C;&#x6837;&#xFF0C;&#x5982;&#x679C;&#x8981;&#x521B;&#x5EFA;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#xFF0C;&#x5219;<strong>&#x5FC5;&#x987B;</strong>&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x73B0;&#x5B58;&#x7684;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x3002;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x4E5F;&#x53EF;&#x4EE5;&#x53D1;&#x5E03;&#x5230;&#x5171;&#x4EAB;&#x955C;&#x50CF;&#x5E93;&#xFF0C;&#x4F46;&#x53D1;&#x5E03;&#x5230;&#x5E93;&#x4E0D;&#x9700;&#x8981;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x7684;&#x5B9A;&#x4E49;&#x3002;</p>
<h3 id="&#x5FC5;&#x987B;">&#x5FC5;&#x987B;</h3>
<ul>
<li><code>image_publisher</code>&#xFF08;string&#xFF09;- &#x7528;&#x4E8E;&#x57FA;&#x7840;&#x955C;&#x50CF;&#x7684;&#x53D1;&#x5E03;&#x8005;&#x7684;&#x540D;&#x79F0;&#xFF08;&#x4EC5;&#x9650; Azure &#x5E02;&#x573A;&#x955C;&#x50CF;&#xFF09;&#x3002;&#x6709;&#x5173;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;<a href="https://docs.microsoft.com/en-us/cli/azure/vm/image" target="_blank">&#x6587;&#x6863;</a>&#x3002;
&#x4F7F;&#x7528; CLI &#x83B7;&#x53D6;&#x8BE5;&#x53C2;&#x6570;&#x7684;&#x793A;&#x4F8B; <code>az vm image list-publishers --location westus</code></li>
<li><code>image_offer</code>&#xFF08;string&#xFF09;- &#x7528;&#x4E8E;&#x57FA;&#x7840;&#x955C;&#x50CF;&#x7684;&#x53D1;&#x5E03;&#x8005; offer &#x7684;&#x540D;&#x79F0;&#xFF08;&#x4EC5;&#x9650; Azure &#x5E02;&#x573A;&#x955C;&#x50CF;&#xFF09;&#x3002;&#x6709;&#x5173;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;<a href="https://docs.microsoft.com/en-us/cli/azure/vm/image" target="_blank">&#x6587;&#x6863;</a>&#x3002;
&#x4F7F;&#x7528; CLI &#x83B7;&#x53D6;&#x8BE5;&#x53C2;&#x6570;&#x7684;&#x793A;&#x4F8B; <code>az vm image list-offers --location westus --publisher Canonical</code></li>
<li><code>image_sku</code>&#xFF08;string&#xFF09;- &#x9002;&#x7528;&#x4E8E;&#x57FA;&#x7840;&#x955C;&#x50CF; offer &#x7684; SKU&#xFF08;&#x4EC5;&#x9650; Azure &#x5E02;&#x573A;&#x955C;&#x50CF;&#xFF09;&#x3002;&#x6709;&#x5173;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;<a href="https://docs.microsoft.com/en-us/cli/azure/vm/image" target="_blank">&#x6587;&#x6863;</a>&#x3002;
&#x4F7F;&#x7528; CLI &#x83B7;&#x53D6;&#x8BE5;&#x53C2;&#x6570;&#x7684;&#x793A;&#x4F8B; <code>az vm image list-skus --location westus --publisher Canonical --offer UbuntuServer</code></li>
<li><code>image_url</code>&#xFF08;string&#xFF09;- &#x4F5C;&#x4E3A;&#x57FA;&#x7840;&#x955C;&#x50CF;&#x7684;&#x81EA;&#x5B9A;&#x4E49; VHD &#x7684; URL&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86;&#x6B64;&#x503C;&#xFF0C;&#x5219;&#x4E0D;&#x5E94;&#x8BBE;&#x7F6E; <code>image_publisher</code>&#x3001;<code>image_offer</code>&#x3001;<code>image_sku</code> &#x6216; <code>image_version</code>&#x3002;</li>
<li><code>custom_managed_image_name</code>&#xFF08;string&#xFF09;- &#x7528;&#x4F5C;&#x57FA;&#x7840;&#x955C;&#x50CF;&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x7684;&#x540D;&#x79F0;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86;&#x8BE5;&#x503C;&#xFF0C;&#x5219;&#x4E0D;&#x8981;&#x8BBE;&#x7F6E; <code>image_publisher</code>&#x3001;<code>image_offer</code>&#x3001;<code>image_sku</code> &#x6216; <code>image_version</code>&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86;&#x6B64;&#x503C;&#xFF0C;&#x5219;&#x8FD8;&#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#x9009;&#x9879; <code>custom_managed_image_resource_group_name</code>&#x3002;&#x8BF7;&#x53C2;&#x9605;<a href="https://docs.microsoft.com/en-us/azure/storage/storage-managed-disks-overview#images" target="_blank">&#x6587;&#x6863;</a>&#x4EE5;&#x4E86;&#x89E3;&#x6709;&#x5173;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x7684;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#x3002;</li>
<li><code>custom_managed_image_resource_group_name</code>&#xFF08;string&#xFF09;- &#x7528;&#x4F5C;&#x4E8E;&#x57FA;&#x7840;&#x955C;&#x50CF;&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x6240;&#x5728;&#x7684;&#x8D44;&#x6E90;&#x7EC4;&#x7684;&#x540D;&#x79F0;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86;&#x6B64;&#x503C;&#xFF0C;&#x5219;&#x4E0D;&#x8981;&#x8BBE;&#x7F6E; <code>image_publisher</code>&#x3001;<code>image_offer</code>&#x3001;<code>image_sku</code> &#x6216; <code>image_version</code>&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86;&#x6B64;&#x503C;&#xFF0C;&#x5219;&#x8FD8;&#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#x9009;&#x9879; <code>custom_managed_image_name</code>&#x3002;&#x8BF7;&#x53C2;&#x9605;<a href="https://docs.microsoft.com/en-us/azure/storage/storage-managed-disks-overview#images" target="_blank">&#x6587;&#x6863;</a>&#x4EE5;&#x4E86;&#x89E3;&#x6709;&#x5173;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x7684;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#x3002;</li>
</ul>
<p>&#x521B;&#x5EFA; VHD &#x65F6;&#xFF0C;&#x9700;&#x8981;&#x4EE5;&#x4E0B;&#x9644;&#x52A0;&#x9009;&#x9879;&#xFF1A;</p>
<ul>
<li><code>capture_container_name</code> (string) - &#x76EE;&#x6807;&#x5BB9;&#x5668;&#x540D;&#x79F0;&#x3002;&#x672C;&#x8D28;&#x4E0A;&#x662F;&#x60A8;&#x7684; VHD &#x5728; Azure &#x4E2D;&#x6240;&#x4FDD;&#x5B58;&#x7684;&#x201C;&#x76EE;&#x5F55;&#x201D;&#x3002;&#x521B;&#x5EFA;&#x7684; VHD &#x7684; URL &#x5C06;&#x4E3A; <code>https://<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>storage_account</span><span class="token punctuation">&gt;</span></span>.blob.core.windows.net/system/Microsoft.Compute/Images/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>capture_container_name</span><span class="token punctuation">&gt;</span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>capture_name_prefix</span><span class="token punctuation">&gt;</span></span>.xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.vhd</code>&#x3002;</li>
<li><code>capture_name_prefix</code>&#xFF08;string&#xFF09;- VHD &#x524D;&#x7F00;&#x3002;&#x6700;&#x7EC8;&#x7684;&#x5236;&#x54C1;&#x5C06;&#x88AB;&#x547D;&#x540D;&#x4E3A; <code>PREFIX-osDisk.UUID</code> &#x548C; <code>PREFIX-vmTemplate.UUID</code>&#x3002;</li>
<li><code>resource_group_name</code> (string) - &#x5C06;&#x5B58;&#x50A8;&#x6700;&#x7EC8;&#x5236;&#x54C1;&#x7684;&#x8D44;&#x6E90;&#x7EC4;&#x3002;</li>
<li><code>storage_account</code> (string) - &#x5B58;&#x50A8;&#x6700;&#x7EC8;&#x5236;&#x54C1;&#x7684;&#x5B58;&#x50A8;&#x5E10;&#x6237;&#x3002;</li>
</ul>
<p>&#x521B;&#x5EFA;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x4EE5;&#x4E0B;&#x9644;&#x52A0;&#x9009;&#x9879;&#xFF1A;</p>
<ul>
<li><code>managed_image_name</code> (string) - &#x8BBE;&#x7F6E;&#x5C06;&#x4FDD;&#x5B58;&#x7684; Packer &#x6784;&#x5EFA;&#x7684;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x7684;&#x540D;&#x79F0;&#x3002;&#x4E0D;&#x80FD;&#x5B58;&#x5728;&#x7528;&#x8BE5;&#x540D;&#x79F0;&#x547D;&#x540D;&#x7684;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#xFF0C;Packer &#x4E0D;&#x4F1A;&#x8986;&#x76D6;&#x540C;&#x540D;&#x6587;&#x4EF6;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86;&#x6B64;&#x503C;&#xFF0C;&#x5219;&#x8FD8;&#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#x503C; <code>managed_image_resource_group_name</code>&#x3002;&#x8BF7;&#x53C2;&#x9605;<a href="https://docs.microsoft.com/en-us/azure/storage/storage-managed-disks-overview#images" target="_blank">&#x6587;&#x6863;</a>&#x4EE5;&#x4E86;&#x89E3;&#x6709;&#x5173;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x7684;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#x3002;</li>
<li><code>managed_image_resource_group_name</code>&#xFF08;string&#xFF09;- &#x8BBE;&#x7F6E;&#x5C06;&#x4FDD;&#x5B58; Packer &#x6784;&#x5EFA;&#x7684;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x7684;&#x8D44;&#x6E90;&#x7EC4;&#x540D;&#x79F0;&#x3002;&#x8D44;&#x6E90;&#x7EC4;&#x5FC5;&#x987B;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86;&#x6B64;&#x503C;&#xFF0C;&#x5219;&#x8FD8;&#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#x503C; <code>managed_image_name</code>&#x3002;&#x8BF7;&#x53C2;&#x9605;<a href="https://docs.microsoft.com/en-us/azure/storage/storage-managed-disks-overview#images" target="_blank">&#x6587;&#x6863;</a>&#x4EE5;&#x4E86;&#x89E3;&#x6709;&#x5173;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x7684;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#x3002;</li>
</ul>
<p>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6307;&#x5B9A; <code>shared_image_gallery</code> &#x914D;&#x7F6E;&#x9009;&#x9879;&#x6765;&#x521B;&#x5EFA;&#x4F7F;&#x7528;<a href="https://azure.microsoft.com/en-us/blog/announcing-the-public-preview-of-shared-image-gallery/" target="_blank">&#x5171;&#x4EAB;&#x5E93;&#x955C;&#x50CF;</a>&#x4F5C;&#x4E3A;&#x6E90;&#x7684;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x3002;</p>
<h3 id="resource-group-&#x7528;&#x4F8B;">Resource Group &#x7528;&#x4F8B;</h3>
<p>Azure &#x6784;&#x5EFA;&#x5668;&#x53EF;&#x4EE5;&#x5728;&#x5B83;&#x63A7;&#x5236;&#x7684;&#x65B0;&#x8D44;&#x6E90;&#x7EC4;&#xFF08;&#x9ED8;&#x8BA4;&#xFF09;&#x6216;&#x73B0;&#x6709;&#x8D44;&#x6E90;&#x7EC4;&#x4E2D;&#x521B;&#x5EFA;&#x8D44;&#x6E90;&#x3002;&#x4F7F;&#x7528; Packer &#x521B;&#x5EFA;&#x7684;&#x8D44;&#x6E90;&#x7EC4;&#x7684;&#x4F18;&#x70B9;&#x662F;&#x5931;&#x8D25;&#x65F6;&#x6E05;&#x7406;&#x8D44;&#x6E90;&#x66F4;&#x5BB9;&#x6613;&#xFF0C;&#x56E0;&#x4E3A;&#x60A8;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x5730;&#x5220;&#x9664;&#x6574;&#x4E2A;&#x8D44;&#x6E90;&#x7EC4;&#xFF0C;&#x4F46;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x63D0;&#x4F9B;&#x7684;&#x51ED;&#x636E;&#x5FC5;&#x987B;&#x5177;&#x6709;&#x521B;&#x5EFA;&#x548C;&#x5220;&#x9664;&#x8D44;&#x6E90;&#x7EC4;&#x7684;&#x6743;&#x9650;&#x3002;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x73B0;&#x6709;&#x8D44;&#x6E90;&#x7EC4;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x5C06;&#x63D0;&#x4F9B;&#x7684;&#x51ED;&#x636E;&#x8303;&#x56F4;&#x9650;&#x5B9A;&#x5230;&#x8BE5;&#x7EC4;&#xFF0C;&#x4F46;&#x662F;&#x6784;&#x5EFA;&#x5931;&#x8D25;&#x540E;&#x66F4;&#x6709;&#x53EF;&#x80FD;&#x7559;&#x4E0B;&#x672A;&#x4F7F;&#x7528;&#x7684;&#x5236;&#x54C1;&#x3002;</p>
<p>&#x8981;&#x8BA9; Packer &#x521B;&#x5EFA;&#x8D44;&#x6E90;&#x7EC4;&#xFF0C;&#x60A8;&#x5FC5;&#x987B;&#x63D0;&#x4F9B;&#xFF1A;</p>
<ul>
<li><code>location</code>(string)&#x60A8;&#x7684;&#x865A;&#x62DF;&#x673A;&#x5C06;&#x5728;&#x8BE5;&#x533A;&#x57DF;&#x8FD0;&#x884C;&#x3002;</li>
</ul>
<p>&#x4F7F;&#x7528; CLI &#x83B7;&#x53D6;&#x8BE5;&#x53C2;&#x6570;&#x7684;&#x793A;&#x4F8B;: <code>az account list-locations</code></p>
<p>&#x5E76;&#x53EF;&#x914D;&#x7F6E;&#x53EF;&#x9009;&#x53C2;&#x6570;&#xFF1A;</p>
<ul>
<li><code>temp_resource_group_name</code>&#xFF08;string&#xFF09;&#x5206;&#x914D;&#x7ED9;&#x6784;&#x5EFA;&#x671F;&#x95F4;&#x521B;&#x5EFA;&#x7684;&#x4E34;&#x65F6;&#x8D44;&#x6E90;&#x7EC4;&#x7684;&#x540D;&#x79F0;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x8BBE;&#x7F6E;&#x6B64;&#x53C2;&#x6570;&#xFF0C;&#x5C06;&#x5206;&#x914D;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x503C;&#x3002;&#x8BE5;&#x8D44;&#x6E90;&#x7EC4;&#x5728;&#x6784;&#x5EFA;&#x7ED3;&#x675F;&#x65F6;&#x88AB;&#x5220;&#x9664;&#x3002;</li>
</ul>
<p>&#x8981;&#x4F7F;&#x7528;&#x73B0;&#x6709;&#x8D44;&#x6E90;&#x7EC4;&#xFF0C;&#x60A8;&#x5FC5;&#x987B;&#x63D0;&#x4F9B;&#xFF1A;</p>
<ul>
<li><code>build_resource_group_name</code>&#xFF08;string&#xFF09;- &#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x73B0;&#x6709;&#x7684;&#x8D44;&#x6E90;&#x7EC4;&#x6765;&#x8FD0;&#x884C;&#x6784;&#x5EFA;&#x3002;
&#x8BBE;&#x7F6E;&#x4E86; <code>temp_resource_group_name</code> &#x6216; <code>location</code> &#x65F6;&#x5C31;&#x4E0D;&#x80FD;&#x8BBE;&#x7F6E; <code>build_resource_group_name</code>&#x3002;</li>
</ul>
<h3 id="&#x53EF;&#x9009;">&#x53EF;&#x9009;</h3>
<ul>
<li><code>user_assigned_managed_identities</code> ([]string) - &#x8981;&#x5728;&#x865A;&#x62DF;&#x673A;&#x4E0A;&#x914D;&#x7F6E;&#x7684;&#x7528;&#x6237;&#x5206;&#x914D;&#x6258;&#x7BA1;&#x8EAB;&#x4EFD;&#x7684;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A; ID &#x7684;&#x5217;&#x8868;&#x3002;&#x6709;&#x5173;&#x5982;&#x4F55;&#x5728;&#x865A;&#x62DF;&#x673A;&#x4E2D;&#x83B7;&#x53D6;&#x4EE4;&#x724C;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;<a href="https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/how-to-use-vm-token" target="_blank">&#x6587;&#x6863;</a>&#x3002;&#x82E5;&#x8981;&#x5C06;&#x7528;&#x6237;&#x5206;&#x914D;&#x7684;&#x6258;&#x7BA1;&#x8EAB;&#x4EFD;&#x5206;&#x914D;&#x7ED9;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x63D0;&#x4F9B;&#x7684;&#x5E10;&#x6237;&#x6216;&#x670D;&#x52A1;&#x4E3B;&#x4F53;&#x5FC5;&#x987B;&#x5177;&#x6709; <a href="https://docs.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#managed-identity-operator" target="_blank"><code>Managed Identity Operator</code></a> &#x548C;<a href="https://docs.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#virtual-machine-contributor" target="_blank"><code>Virtual Machine Contributor</code></a>&#x7684;&#x89D2;&#x8272;&#x3002;</li>
<li><code>capture_name_prefix</code>&#xFF08;string&#xFF09;- VHD &#x524D;&#x7F00;&#x3002;</li>
<li><code>capture_container_name</code> (string) - &#x76EE;&#x6807;&#x5BB9;&#x5668;&#x540D;&#x79F0;&#x3002;</li>
<li><code>shared_image_gallery</code> (SharedImageGallery) - &#x4F7F;&#x7528;<a href="https://azure.microsoft.com/en-us/blog/announcing-the-public-preview-of-shared-image-gallery/" target="_blank">&#x5171;&#x4EAB;&#x955C;&#x50CF;&#x5E93;&#x7684;&#x955C;&#x50CF;</a>&#x4F5C;&#x4E3A;&#x672C;&#x6B21;&#x6784;&#x5EFA;&#x7684;&#x6E90;&#x955C;&#x50CF;&#x3002; <em>VHD &#x76EE;&#x6807;&#x4E0E;&#x6B64;&#x6784;&#x5EFA;&#x7C7B;&#x578B;&#x4E0D;&#x517C;&#x5BB9;</em> - &#x76EE;&#x6807;&#x5FC5;&#x987B;&#x662F;<em>&#x6258;&#x7BA1;&#x955C;&#x50CF;</em>&#x3002;&#x5F53;&#x4F7F;&#x7528; <code>shared_image_gallery</code> &#x4F5C;&#x4E3A;&#x6E90;&#x65F6;&#xFF0C;&#x4E0D;&#x5E94;&#x8BBE;&#x7F6E; <code>image_publisher</code>&#x3001;<code>image_offer</code>&#x3001;<code>image_sku</code>&#x3001;<code>image_version</code> &#x548C; <code>custom_managed_image_name</code>&#x3002;</li>
</ul>
<p>JSON &#x6837;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-json"><span class="token property">&quot;shared_image_gallery&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;subscription&quot;</span><span class="token operator">:</span> <span class="token string">&quot;00000000-0000-0000-0000-00000000000&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;resource_group&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ResourceGroup&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;gallery_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;GalleryName&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;image_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ImageName&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;image_version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token property">&quot;managed_image_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TargetImageName&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;managed_image_resource_group_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TargetResourceGroup&quot;</span>
</code></pre>
<p>HCL &#x6837;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-hcl"><span class="token keyword">shared_image_gallery</span> <span class="token punctuation">{</span>
    <span class="token property">subscription</span> <span class="token punctuation">=</span> <span class="token string">&quot;00000000-0000-0000-0000-00000000000&quot;</span>
    <span class="token property">resource_group</span> <span class="token punctuation">=</span> <span class="token string">&quot;ResourceGroup&quot;</span>
    <span class="token property">gallery_name</span> <span class="token punctuation">=</span> <span class="token string">&quot;GalleryName&quot;</span>
    <span class="token property">image_name</span> <span class="token punctuation">=</span> <span class="token string">&quot;ImageName&quot;</span>
    <span class="token property">image_version</span> <span class="token punctuation">=</span> <span class="token string">&quot;1.0.0&quot;</span>
<span class="token punctuation">}</span>
<span class="token property">managed_image_name</span> <span class="token punctuation">=</span> <span class="token string">&quot;TargetImageName&quot;</span>
<span class="token property">managed_image_resource_group_name</span> <span class="token punctuation">=</span> <span class="token string">&quot;TargetResourceGroup&quot;</span>
</code></pre>
<ul>
<li><code>shared_image_gallery_destination</code> (SharedImageGalleryDestination) - &#x5171;&#x4EAB;&#x955C;&#x50CF;&#x5E93;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x5C06;&#x53D1;&#x5E03;&#x4E3A;&#x8BE5;&#x5171;&#x4EAB;&#x955C;&#x50CF;&#x5E93;&#x5185;&#x7684;&#x955C;&#x50CF;&#x7248;&#x672C;&#x3002;</li>
</ul>
<p>JSON &#x6837;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-json"><span class="token property">&quot;shared_image_gallery_destination&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;subscription&quot;</span><span class="token operator">:</span> <span class="token string">&quot;00000000-0000-0000-0000-00000000000&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;resource_group&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ResourceGroup&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;gallery_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;GalleryName&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;image_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ImageName&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;image_version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;replication_regions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;regionA&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;regionB&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;regionC&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;storage_account_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Standard_LRS&quot;</span>
<span class="token punctuation">}</span>
<span class="token property">&quot;managed_image_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TargetImageName&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;managed_image_resource_group_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TargetResourceGroup&quot;</span>
</code></pre>
<p>HCL &#x6837;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-hcl"><span class="token keyword">shared_image_gallery_destination</span> <span class="token punctuation">{</span>
    <span class="token property">subscription</span> <span class="token punctuation">=</span> <span class="token string">&quot;00000000-0000-0000-0000-00000000000&quot;</span>
    <span class="token property">resource_group</span> <span class="token punctuation">=</span> <span class="token string">&quot;ResourceGroup&quot;</span>
    <span class="token property">gallery_name</span> <span class="token punctuation">=</span> <span class="token string">&quot;GalleryName&quot;</span>
    <span class="token property">image_name</span> <span class="token punctuation">=</span> <span class="token string">&quot;ImageName&quot;</span>
    <span class="token property">image_version</span> <span class="token punctuation">=</span> <span class="token string">&quot;1.0.0&quot;</span>
    <span class="token property">replication_regions</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;regionA&quot;</span>, <span class="token string">&quot;regionB&quot;</span>, <span class="token string">&quot;regionC&quot;</span><span class="token punctuation">]</span>
    <span class="token property">storage_account_type</span> <span class="token punctuation">=</span> <span class="token string">&quot;Standard_LRS&quot;</span>
<span class="token punctuation">}</span>
<span class="token property">managed_image_name</span> <span class="token punctuation">=</span> <span class="token string">&quot;TargetImageName&quot;</span>
<span class="token property">managed_image_resource_group_name</span> <span class="token punctuation">=</span> <span class="token string">&quot;TargetResourceGroup&quot;</span>
</code></pre>
<ul>
<li><code>shared_image_gallery_timeout</code>&#xFF08;&#x6301;&#x7EED;&#x65F6;&#x95F4;string | &#x4F8B;&#x5982;&#xFF1A;<code>&quot;1h5m2s&quot;</code>&#xFF09; - &#x5728;&#x8D85;&#x65F6;&#x4E4B;&#x524D;&#x7B49;&#x5F85;&#x955C;&#x50CF;&#x53D1;&#x5E03;&#x5230;&#x5171;&#x4EAB;&#x955C;&#x50CF;&#x5E93;&#x7684;&#x65F6;&#x95F4;&#x3002;&#x5982;&#x679C;&#x60A8;&#x7684; Packer &#x6784;&#x5EFA;&#x5728;&#x53D1;&#x5E03;&#x5230;&#x5171;&#x4EAB;&#x955C;&#x50CF;&#x5E93;&#x6B65;&#x9AA4;&#x4E2D;&#x5931;&#x8D25;&#x5E76;&#x51FA;&#x73B0; <code>Original Error: context deadline exceeded</code>&#xFF0C;&#x4F46;&#x662F;&#x5F53;&#x60A8;&#x4ECE; Azure &#x7F51;&#x9875;&#x63A7;&#x5236;&#x53F0;&#x68C0;&#x67E5;&#x65F6;&#x955C;&#x50CF;&#x5B58;&#x5728;&#xFF0C;&#x90A3;&#x4E48;&#x60A8;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x5C06;&#x6B64;&#x8D85;&#x65F6;&#x4ECE;&#x5176;&#x9ED8;&#x8BA4;&#x503C; <code>&quot;60m&quot;</code> &#x589E;&#x52A0;&#xFF08;&#x6709;&#x6548;&#x7684;&#x65F6;&#x95F4;&#x5355;&#x4F4D;&#x5305;&#x62EC; <code>s</code> &#x4EE3;&#x8868;&#x79D2;&#xFF0C;<code>m</code> &#x4EE3;&#x8868;&#x5206;&#x949F;&#xFF0C;<code>h</code> &#x4EE3;&#x8868;&#x5C0F;&#x65F6;&#x3002;&#xFF09;</li>
<li><code>shared_gallery_image_version_end_of_life_date</code>(string)- &#x5171;&#x4EAB;&#x955C;&#x50CF;&#x5E93;&#x955C;&#x50CF;&#x7248;&#x672C;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x7ED3;&#x675F;&#x65E5;&#x671F; (2006-01-02T15:04:05.99Z)&#x3002;&#x6B64;&#x5C5E;&#x6027;&#x53EF;&#x7528;&#x4E8E;&#x9000;&#x5F79;&#x76EE;&#x7684;&#x3002;</li>
<li><code>shared_image_gallery_replica_count</code> (int32) - &#x8981;&#x521B;&#x5EFA;&#x7684;&#x955C;&#x50CF;&#x7248;&#x672C;&#x5728;&#x6BCF;&#x4E2A;&#x533A;&#x57DF;&#x7684;&#x526F;&#x672C;&#x6570;&#x3002;&#x5F53;&#x672A;&#x6307;&#x5B9A; <code>regionalReplicaCount</code> &#x65F6;&#xFF0C;&#x6B64;&#x5C5E;&#x6027;&#x5C06;&#x5BF9;&#x5355;&#x4E2A;&#x533A;&#x57DF;&#x751F;&#x6548;&#x3002;&#x526F;&#x672C;&#x6570;&#x5FC5;&#x987B;&#x5728; <code>1</code> &#x5230; <code>100</code> &#x4E4B;&#x95F4;&#xFF0C;&#x4F46;&#x5BF9;&#x4E8E;&#x5927;&#x591A;&#x6570;&#x7528;&#x4F8B;&#x800C;&#x8A00;&#xFF0C;<code>50</code> &#x4E2A;&#x526F;&#x672C;&#x5E94;&#x8BE5;&#x8DB3;&#x591F;&#x4E86;&#x3002;</li>
<li><code>shared_gallery_image_version_exclude_from_latest</code> (bool) - &#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E3A; <code>true</code>&#xFF0C;&#x8BBE;&#x7F6E;&#x4E3A;&#x4ECE;&#x6700;&#x65B0;&#x7248;&#x672C;&#x7684;&#x955C;&#x50CF;&#x5B9A;&#x4E49;&#x90E8;&#x7F72;&#x7684;&#x865A;&#x62DF;&#x673A;&#x5C06;&#x4E0D;&#x4F1A;&#x4F7F;&#x7528;&#x6B64;&#x955C;&#x50CF;&#x7248;&#x672C;&#x3002;</li>
<li><code>image_version</code>(string)- &#x6307;&#x5B9A;&#x8981;&#x4F7F;&#x7528;&#x7684;&#x955C;&#x50CF;&#x7248;&#x672C;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A; <code>latest</code>&#x3002;&#x7531;&#x4E8E;&#x955C;&#x50CF;&#x540C;&#x6B65;&#x5EF6;&#x8FDF;&#xFF0C;&#x4E0D;&#x540C;&#x5730;&#x533A;&#x53EF;&#x7528;&#x7684;&#x7248;&#x672C;&#x53EF;&#x80FD;&#x5B58;&#x5728;&#x5DEE;&#x5F02;&#x3002;&#x4E3A;&#x786E;&#x4FDD;&#x8DE8;&#x533A;&#x57DF;&#x7684;&#x7248;&#x672C;&#x4E00;&#x81F4;&#xFF0C;&#x8BF7;&#x5C06;&#x6B64;&#x503C;&#x8BBE;&#x7F6E;&#x4E3A;&#x5728;&#x60A8;&#x90E8;&#x7F72;&#x7684;&#x6240;&#x6709;&#x533A;&#x57DF;&#x90FD;&#x53EF;&#x7528;&#x7684;&#x503C;&#x3002;
&#x4F7F;&#x7528; CLI &#x83B7;&#x53D6;&#x8BE5;&#x53C2;&#x6570;&#x7684;&#x793A;&#x4F8B; <code>az vm image list --location westus --publisher Canonical --offer UbuntuServer --sku 16.04.0-LTS --all</code></li>
<li><code>location</code>(string)- &#x5C06;&#x8981;&#x8FD0;&#x884C;&#x6784;&#x5EFA;&#x7684;&#x865A;&#x62DF;&#x673A;&#x6240;&#x5728;&#x7684; Azure &#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x3002;</li>
<li><code>vm_size</code> (string) - &#x7528;&#x4E8E;&#x6784;&#x5EFA;&#x7684;&#x865A;&#x62DF;&#x673A;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x5F53;&#x60A8;&#x4ECE; VHD &#x90E8;&#x7F72;&#x865A;&#x62DF;&#x673A;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x66F4;&#x6539;&#x6B64;&#x8BBE;&#x7F6E;&#x3002;&#x67E5;&#x770B;<a href="https://azure.microsoft.com/en-us/pricing/details/virtual-machines/" target="_blank">&#x5B9A;&#x4EF7;</a>&#x4FE1;&#x606F;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A; <code>Standard_A1</code>&#x3002;
&#x4F7F;&#x7528; CLI &#x83B7;&#x53D6;&#x8BE5;&#x53C2;&#x6570;&#x7684;&#x793A;&#x4F8B; <code>az vm list-sizes --location westus</code></li>
<li><code>spot</code> (Spot) - &#x662F;&#x5426;&#x5728;&#x6784;&#x5EFA;&#x671F;&#x95F4;&#x4F7F;&#x7528; spot &#x5B9E;&#x4F8B;&#xFF1B; spot &#x914D;&#x7F6E;&#x8BBE;&#x7F6E;&#x4EC5;&#x9002;&#x7528;&#x4E8E; Packer &#x542F;&#x52A8;&#x7684;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x4E0D;&#x4F1A;&#x4FDD;&#x7559;&#x5728;&#x751F;&#x6210;&#x7684;&#x955C;&#x50CF;&#x5236;&#x54C1;&#x4E0A;&#x3002;</li>
<li><code>managed_image_resource_group_name</code>(string)- &#x6307;&#x5B9A;&#x5C06;&#x7528;&#x4E8E;&#x4FDD;&#x5B58; Packer &#x6784;&#x5EFA;&#x7ED3;&#x679C;&#x7684;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x7684;&#x8D44;&#x6E90;&#x7EC4;&#x540D;&#x79F0;&#x3002;&#x8D44;&#x6E90;&#x7EC4;&#x5FC5;&#x987B;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86;&#x6B64;&#x503C;&#xFF0C;&#x5219;&#x8FD8;&#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#x503C; <code>managed_image_name</code>&#x3002;&#x8BF7;&#x53C2;&#x9605;&#x6587;&#x6863;&#x4EE5;&#x4E86;&#x89E3;&#x6709;&#x5173;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x7684;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#x3002;</li>
<li><code>managed_image_name</code> (string) - &#x6307;&#x5B9A;&#x5C06;&#x4FDD;&#x5B58; Packer &#x6784;&#x5EFA;&#x7ED3;&#x679C;&#x7684;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x540D;&#x79F0;&#x3002;&#x4E0D;&#x80FD;&#x63D0;&#x524D;&#x5B58;&#x5728;&#x540C;&#x540D;&#x955C;&#x50CF;&#xFF0C;Packer &#x4E0D;&#x4F1A;&#x5C1D;&#x8BD5;&#x8986;&#x76D6;&#x540C;&#x540D;&#x955C;&#x50CF;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86;&#x6B64;&#x503C;&#xFF0C;&#x5219;&#x8FD8;&#x5FC5;&#x987B;&#x8BBE;&#x7F6E; <code>managed_image_resource_group_name</code>&#x3002;&#x8BF7;&#x53C2;&#x9605;&#x6587;&#x6863;&#x4EE5;&#x4E86;&#x89E3;&#x6709;&#x5173;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x7684;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#x3002;</li>
<li><code>managed_image_storage_account_type</code>(string)- &#x6307;&#x5B9A;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x7684;&#x5B58;&#x50A8;&#x5E10;&#x6237;&#x7C7B;&#x578B;&#x3002;&#x6709;&#x6548;&#x503C;&#x4E3A; <code>Standard_LRS</code> &#x548C; <code>Premium_LRS</code>&#x3002;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A; <code>Standard_LRS</code>&#x3002;</li>
<li><code>managed_image_os_disk_snapshot_name</code>(string)- &#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86; <code>managed_image_os_disk_snapshot_name</code>&#xFF0C;&#x5219;&#x4F1A;&#x5728;&#x4FDD;&#x5B58;&#x865A;&#x62DF;&#x673A;&#x4E4B;&#x524D;&#x4F7F;&#x7528;&#x4E0E;&#x6B64;&#x503C;&#x76F8;&#x540C;&#x7684;&#x540D;&#x79F0;&#x521B;&#x5EFA;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x78C1;&#x76D8;&#x7684;&#x5FEB;&#x7167;&#x3002;</li>
<li><code>managed_image_data_disk_snapshot_prefix</code>(string)- &#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86; <code>managed_image_data_disk_snapshot_prefix</code>&#xFF0C;&#x5219;&#x5728;&#x4FDD;&#x5B58;&#x865A;&#x62DF;&#x673A;&#x4E4B;&#x524D;&#x4F7F;&#x7528;&#x4E0E;&#x6B64;&#x503C;&#x76F8;&#x540C;&#x7684;&#x524D;&#x7F00;&#x521B;&#x5EFA;&#x6570;&#x636E;&#x78C1;&#x76D8;&#x7684;&#x5FEB;&#x7167;&#x3002;</li>
<li><code>keep_os_disk</code> (bool) - &#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86; <code>keep_os_disk</code>&#xFF0C;&#x5219;&#x4E0D;&#x4F1A;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x78C1;&#x76D8;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A; <code>false</code>&#x3002;</li>
<li><code>managed_image_zone_resilient</code> (bool) - &#x5C06;&#x955C;&#x50CF;&#x5B58;&#x50A8;&#x5728;&#x533A;&#x57DF;&#x5F39;&#x6027;&#x5B58;&#x50A8;&#x4E2D;&#x3002;&#x60A8;&#x9700;&#x8981;&#x5728;&#x652F;&#x6301;<a href="https://docs.microsoft.com/en-us/azure/availability-zones/az-overview" target="_blank">&#x53EF;&#x7528;&#x533A;</a>&#x7684;&#x533A;&#x57DF;&#x4E2D;&#x521B;&#x5EFA;&#x5B83;&#x3002;</li>
<li><code>azure_tags</code> (map[string]string) - &#x521B;&#x5EFA;&#x7684;&#x6240;&#x6709;&#x4F8B;&#x5982;&#x8D44;&#x6E90;&#x7EC4;&#x3001;VM&#x3001;NIC&#x3001;VNET&#x3001;&#x516C;&#x7F51; IP&#x3001;KeyVault &#x7B49;&#x8D44;&#x6E90;&#x6240;&#x9644;&#x5E26;&#x7684; Name/Value &#x6807;&#x7B7E;&#x5BF9;&#x3002;&#x7528;&#x6237;&#x6700;&#x591A;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49; 15 &#x4E2A;&#x6807;&#x7B7E;&#x3002;&#x6807;&#x8BB0;&#x540D;&#x79F0;&#x4E0D;&#x80FD;&#x8D85;&#x8FC7; 512 &#x4E2A;&#x5B57;&#x7B26;&#xFF0C;&#x6807;&#x8BB0;&#x503C;&#x4E0D;&#x80FD;&#x8D85;&#x8FC7; 256 &#x4E2A;&#x5B57;&#x7B26;&#x3002;</li>
<li><code>azure_tag</code> ([]{name string, value string}) - &#x4E0E; <code>azure_tags</code> &#x76F8;&#x540C;&#xFF0C;&#x4F46;&#x5B9A;&#x4E49;&#x4E3A;&#x5305;&#x542B;&#x540D;&#x79F0;&#x548C;&#x503C;&#x5B57;&#x6BB5;&#x7684;&#x5355;&#x4E00;&#x53EF;&#x91CD;&#x590D;&#x5757;&#x3002;&#x5728; HCL2 &#x6A21;&#x5F0F;&#x4E0B;&#xFF0C;<code>dynamic_block</code> &#x5C06;&#x5141;&#x8BB8;&#x60A8;&#x52A8;&#x6001;&#x5730;&#x751F;&#x6210;&#x8FD9;&#x4E9B;&#x5185;&#x5BB9;&#x3002;</li>
<li><code>resource_group_name</code> (string) - &#x5C06;&#x5B58;&#x50A8;&#x6700;&#x7EC8;&#x5236;&#x54C1;&#x7684;&#x8D44;&#x6E90;&#x7EC4;&#x3002;</li>
<li><code>storage_account</code> (string) - &#x5B58;&#x50A8;&#x6700;&#x7EC8;&#x5236;&#x54C1;&#x7684; Storage Account&#x3002;</li>
<li><code>temp_compute_name</code>(string)- &#x5206;&#x914D;&#x7ED9;&#x865A;&#x62DF;&#x673A;&#x7684;&#x4E34;&#x65F6;&#x540D;&#x79F0;&#x3002;&#x5982;&#x679C;&#x672A;&#x8BBE;&#x7F6E;&#x6B64;&#x503C;&#xFF0C;&#x5C06;&#x5206;&#x914D;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x503C;&#x3002;&#x77E5;&#x6653;&#x8D44;&#x6E90;&#x7EC4;&#x548C;&#x865A;&#x62DF;&#x673A;&#x540D;&#x79F0;&#x662F;&#x7684; Packer &#x5728;&#x6784;&#x5EFA;&#x671F;&#x95F4;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x6765;&#x66F4;&#x65B0;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x4F8B;&#x5982;&#x5C06;&#x8D44;&#x6E90;&#x78C1;&#x76D8;&#x9644;&#x52A0;&#x5230;&#x865A;&#x62DF;&#x673A;&#x3002;</li>
<li><code>temp_nic_name</code> (string) - &#x5206;&#x914D;&#x7ED9; Nic &#x7684;&#x4E34;&#x65F6;&#x540D;&#x79F0;&#x3002;&#x5982;&#x679C;&#x672A;&#x8BBE;&#x7F6E;&#x6B64;&#x503C;&#xFF0C;&#x5C06;&#x5206;&#x914D;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x503C;&#x3002;&#x5982;&#x679C;&#x80FD;&#x591F;&#x5206;&#x914D;&#x9075;&#x5FAA;&#x547D;&#x540D;&#x7EA6;&#x5B9A;&#x89C4;&#x8303;&#x7684;&#x81EA;&#x5B9A;&#x4E49; nic &#x540D;&#x79F0;&#x53EF;&#x4EE5;&#x7B80;&#x5316;&#x90E8;&#x7F72;&#x3002;</li>
<li><code>temp_resource_group_name</code> (string) - &#x5206;&#x914D;&#x7ED9;&#x6784;&#x5EFA;&#x671F;&#x95F4;&#x521B;&#x5EFA;&#x7684;&#x4E34;&#x65F6;&#x8D44;&#x6E90;&#x7EC4;&#x7684;&#x540D;&#x79F0;&#x3002;&#x5982;&#x679C;&#x672A;&#x8BBE;&#x7F6E;&#x6B64;&#x503C;&#xFF0C;&#x5C06;&#x5206;&#x914D;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x503C;&#x3002;&#x8BE5;&#x8D44;&#x6E90;&#x7EC4;&#x5728;&#x6784;&#x5EFA;&#x7ED3;&#x675F;&#x65F6;&#x88AB;&#x5220;&#x9664;&#x3002;</li>
<li><code>build_resource_group_name</code>(string)- &#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x73B0;&#x6709;&#x7684;&#x8D44;&#x6E90;&#x7EC4;&#x6765;&#x8FD0;&#x884C;&#x6784;&#x5EFA;&#x3002;</li>
<li><code>build_key_vault_name</code>(string)- &#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x73B0;&#x6709;&#x7684; Key Vault&#xFF0C;&#x7528;&#x4E8E;&#x5C06;&#x8BC1;&#x4E66;&#x4E0A;&#x4F20;&#x5230;&#x8981;&#x8FDE;&#x63A5;&#x7684;&#x5B9E;&#x4F8B;&#x3002;</li>
<li><code>build_key_vault_sku</code>(string)- &#x6307;&#x5B9A;&#x8981;&#x5728;&#x6784;&#x5EFA;&#x671F;&#x95F4;&#x521B;&#x5EFA;&#x7684; Key Vault &#x7684; SKU&#x3002;&#x6709;&#x6548;&#x503C;&#x4E3A; <code>standard</code> &#x6216; <code>premium</code>&#x3002;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A; <code>standard</code>&#x3002;</li>
<li><code>disk_encryption_set_id</code>(string)- &#x6307;&#x5B9A;&#x78C1;&#x76D8;&#x52A0;&#x5BC6;&#x96C6;(Disk Encryption Set) ID&#xFF0C;&#x7528;&#x4E8E;&#x52A0;&#x5BC6;&#x5728;&#x6784;&#x5EFA;&#x671F;&#x95F4;&#x4F7F;&#x7528;&#x865A;&#x62DF;&#x673A;&#x521B;&#x5EFA;&#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x548C;&#x6570;&#x636E;&#x78C1;&#x76D8;&#xFF0C;&#x4EC5;&#x5728;&#x53D1;&#x5E03;&#x5230;&#x5171;&#x4EAB;&#x955C;&#x50CF;&#x5E93;&#x65F6;&#x53EF;&#x7528;&#xFF0C;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x4E0D;&#x53EF;&#x7528;&#x3002;&#x78C1;&#x76D8;&#x52A0;&#x5BC6;&#x96C6; ID &#x53EF;&#x4EE5;&#x5728;Azure &#x95E8;&#x6237;&#x4E0A;&#x8BBE;&#x7F6E;&#x7684;&#x78C1;&#x76D8;&#x52A0;&#x5BC6;&#x7684;&#x5C5E;&#x6027;&#x9009;&#x9879;&#x5361;&#x4E2D;&#x67E5;&#x770B; <a href="https://learn.microsoft.com/en-us/azure/virtual-machines/image-version-encryption" target="_blank">https://learn.microsoft.com/en-us/azure/virtual-machines/image-version-encryption</a></li>
<li><code>private_virtual_network_with_public_ip</code> (bool) - &#x6B64;&#x503C;&#x5141;&#x8BB8;&#x60A8;&#x8BBE;&#x7F6E; <code>virtual_network_name</code> &#x5E76;&#x83B7;&#x53D6;&#x516C;&#x7F51; IP&#x3002;&#x5982;&#x679C;&#x672A;&#x8BBE;&#x7F6E;&#x8BE5;&#x503C;&#x4E14; <code>virtual_network_name</code> &#x5DF2;&#x5B9A;&#x4E49;&#xFF0C;&#x5219;&#x4EC5;&#x5141;&#x8BB8;&#x4ECE;&#x540C;&#x4E00;&#x5B50;&#x7F51;/&#x865A;&#x62DF;&#x7F51;&#x7EDC;&#x4E0A;&#x7684;&#x4E3B;&#x673A;&#x6267;&#x884C; Packer&#x3002;</li>
<li><code>virtual_network_name</code>(string)- &#x4E3A;&#x865A;&#x62DF;&#x673A;&#x4F7F;&#x7528;&#x9884;&#x5148;&#x5B58;&#x5728;&#x7684;&#x865A;&#x62DF;&#x7F51;&#x7EDC;&#x3002;&#x6B64;&#x9009;&#x9879;&#x542F;&#x7528;&#x4E0E;&#x865A;&#x62DF;&#x673A;&#x7684;&#x79C1;&#x6709;&#x901A;&#x4FE1;&#xFF0C;&#x4E0D;&#x4F7F;&#x7528;&#x6216;&#x914D;&#x7F6E;&#x516C;&#x7F51; IP &#x5730;&#x5740;&#xFF08;&#x9664;&#x975E;&#x60A8;&#x8BBE;&#x7F6E; <code>private_virtual_network_with_public_ip</code>&#xFF09;&#x3002;</li>
<li><code>virtual_network_subnet_name</code> (string) - &#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86; <code>virtual_network_name</code>&#xFF0C;&#x5219;&#x4E5F;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x8BE5;&#x503C;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86; <code>virtual_network_name</code> &#x800C;&#x672A;&#x8BBE;&#x7F6E;&#x6B64;&#x503C;&#xFF0C;&#x5219;&#x6784;&#x5EFA;&#x5668;&#x4F1A;&#x5C1D;&#x8BD5;&#x786E;&#x5B9A;&#x8981;&#x4E0E;&#x865A;&#x62DF;&#x7F51;&#x7EDC;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#x7684;&#x5B50;&#x7F51;&#x3002;&#x5982;&#x679C;&#x627E;&#x4E0D;&#x5230;&#x5B50;&#x7F51;&#xFF0C;&#x6216;&#x8005;&#x65E0;&#x6CD5;&#x5728;&#x591A;&#x4E2A;&#x5B50;&#x7F51;&#x4E2D;&#x51B3;&#x5B9A;&#x4F7F;&#x7528;&#x54EA;&#x4E2A;&#xFF0C;&#x5219;&#x5E94;&#x8BBE;&#x7F6E;&#x6B64;&#x503C;&#x3002;</li>
<li><code>virtual_network_resource_group_name</code>(string)- &#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86; <code>virtual_network_name</code>&#xFF0C;&#x5219;&#x4E5F;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x8BE5;&#x503C;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86; <code>virtual_network_name</code> &#x800C;&#x672A;&#x8BBE;&#x7F6E;&#x6B64;&#x503C;&#xFF0C;&#x6784;&#x5EFA;&#x5668;&#x5C06;&#x5C1D;&#x8BD5;&#x786E;&#x5B9A;&#x5305;&#x542B;&#x865A;&#x62DF;&#x7F51;&#x7EDC;&#x7684;&#x8D44;&#x6E90;&#x7EC4;&#x3002;&#x5982;&#x679C;&#x627E;&#x4E0D;&#x5230;&#x8D44;&#x6E90;&#x7EC4;&#xFF0C;&#x6216;&#x8005;&#x65E0;&#x6CD5;&#x6D88;&#x9664;&#x6B67;&#x4E49;&#xFF0C;&#x5219;&#x5E94;&#x8BBE;&#x7F6E;&#x6B64;&#x503C;&#x3002;</li>
<li><code>custom_data_file</code> (string) - &#x6307;&#x5B9A;&#x5305;&#x542B; custom data &#x7684;&#x6587;&#x4EF6;&#x4EE5;&#x6CE8;&#x5165;&#x5230; cloud-init &#x8FDB;&#x7A0B;&#x4E2D;&#x3002;&#x6587;&#x4EF6;&#x7684;&#x5185;&#x5BB9;&#x88AB;&#x8BFB;&#x53D6;&#x5E76;&#x6CE8;&#x5165;&#x5230; ARM &#x6A21;&#x677F;&#x4E2D;&#x3002;custom data &#x5C06;&#x5728;&#x914D;&#x7F6E;&#x65F6;&#x4F20;&#x9012;&#x7ED9; cloud-init &#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;&#x8BF7;&#x53C2;&#x9605;<a href="http://cloudinit.readthedocs.io/en/latest/topics/examples.html" target="_blank">&#x6587;&#x6863;</a>&#x4EE5;&#x4E86;&#x89E3;&#x6709;&#x5173;&#x81EA;&#x5B9A;&#x4E49;&#x6570;&#x636E;&#x7684;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x4EE5;&#x53CA;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x5B83;&#x6765;&#x5F71;&#x54CD;&#x4F9B;&#x5E94;&#x8FC7;&#x7A0B;&#x3002;</li>
<li><code>custom_data</code> (string) - &#x6307;&#x5B9A;&#x542F;&#x52A8;&#x5B9E;&#x4F8B;&#x65F6;&#x8981;&#x5E94;&#x7528;&#x7684; Base64 &#x7F16;&#x7801; custom data&#x3002;&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x7531;&#x4E8E;&#x6A21;&#x677F;&#x662F; JSON&#xFF0C;&#x56E0;&#x6B64;&#x60A8;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x8F6C;&#x4E49;&#x5B57;&#x7B26;&#x3002;custom data &#x5C06;&#x5728;&#x914D;&#x7F6E;&#x65F6;&#x4F20;&#x9012;&#x7ED9; cloud-init &#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;&#x8BF7;&#x53C2;&#x9605;<a href="http://cloudinit.readthedocs.io/en/latest/topics/examples.html" target="_blank">&#x6587;&#x6863;</a>&#x4EE5;&#x4E86;&#x89E3;&#x6709;&#x5173; custom data &#x7684;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x4EE5;&#x53CA;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x5B83;&#x6765;&#x5F71;&#x54CD;&#x914D;&#x7F6E;&#x8FC7;&#x7A0B;&#x3002;</li>
<li><code>user_data_file</code> (string) - &#x6307;&#x5B9A;&#x5305;&#x542B; user data &#x7684;&#x6587;&#x4EF6;&#x4EE5;&#x6CE8;&#x5165;&#x5230; cloud-init &#x8FDB;&#x7A0B;&#x4E2D;&#x3002;&#x6587;&#x4EF6;&#x7684;&#x5185;&#x5BB9;&#x88AB;&#x8BFB;&#x53D6;&#x5E76;&#x6CE8;&#x5165;&#x5230; ARM &#x6A21;&#x677F;&#x4E2D;&#x3002;&#x4ECE;&#x865A;&#x62DF;&#x673A;&#x88AB;&#x914D;&#x7F6E;&#x5230;&#x88AB;&#x5220;&#x9664;&#x4E4B;&#x95F4;&#xFF0C;user data &#x90FD;&#x53EF;&#x4EE5;&#x88AB;&#x8BFB;&#x53D6;&#x3002;&#x865A;&#x62DF;&#x673A;&#x4E0A;&#x7684;&#x4EFB;&#x4F55;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x90FD;&#x53EF;&#x4EE5;&#x5728;&#x914D;&#x7F6E;&#x540E;&#x4ECE; Azure &#x5B9E;&#x4F8B;&#x5143;&#x6570;&#x636E;&#x670D;&#x52A1; (IMDS) &#x8BBF;&#x95EE; user data&#x3002;&#x8BF7;&#x53C2;&#x9605;<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/user-data" target="_blank">&#x6587;&#x6863;</a>&#x4EE5;&#x4E86;&#x89E3;&#x6709;&#x5173;&#x7528;&#x6237;&#x6570;&#x636E;&#x7684;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#x3002;</li>
<li><code>user_data</code> (string) - &#x6307;&#x5B9A;&#x8981;&#x5E94;&#x7528;&#x7684; Base64 &#x7F16;&#x7801; user data&#x3002;&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x7531;&#x4E8E;&#x6A21;&#x677F;&#x662F; JSON&#xFF0C;&#x56E0;&#x6B64;&#x60A8;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x8F6C;&#x4E49;&#x5B57;&#x7B26;&#x3002;&#x4ECE;&#x865A;&#x62DF;&#x673A;&#x88AB;&#x914D;&#x7F6E;&#x5230;&#x88AB;&#x5220;&#x9664;&#x4E4B;&#x95F4;&#xFF0C;user data &#x90FD;&#x53EF;&#x4EE5;&#x88AB;&#x8BFB;&#x53D6;&#x3002;&#x865A;&#x62DF;&#x673A;&#x4E0A;&#x7684;&#x4EFB;&#x4F55;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x90FD;&#x53EF;&#x4EE5;&#x5728;&#x914D;&#x7F6E;&#x540E;&#x4ECE; Azure &#x5B9E;&#x4F8B;&#x5143;&#x6570;&#x636E;&#x670D;&#x52A1; (IMDS) &#x8BBF;&#x95EE; user data&#x3002;&#x8BF7;&#x53C2;&#x9605;<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/user-data" target="_blank">&#x6587;&#x6863;</a>&#x4EE5;&#x4E86;&#x89E3;&#x6709;&#x5173;&#x7528;&#x6237;&#x6570;&#x636E;&#x7684;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#x3002;</li>
<li><code>custom_script</code>&#xFF08;string&#xFF09;- &#x7528;&#x4E8E;&#x5728;&#x955C;&#x50CF;&#x6784;&#x5EFA;&#x671F;&#x95F4;&#x8FD0;&#x884C;&#x6709;&#x5173;&#x865A;&#x62DF;&#x673A;&#x914D;&#x7F6E;&#x7684;&#x811A;&#x672C;&#x3002;</li>
</ul>
<p>&#x4EE5;&#x4E0B;&#x793A;&#x4F8B;&#x6267;&#x884C; <code>user_data_file</code> &#x6307;&#x5B9A;&#x7684;&#x6587;&#x4EF6;&#x7684;&#x5185;&#x5BB9;&#xFF1A;</p>
<pre class="language-"><code class="lang-text">custom_script   = &quot;powershell -ExecutionPolicy Unrestricted -NoProfile -NonInteractive -Command \&quot;$userData = (Invoke-RestMethod -Headers @{Metadata=$true} -Method GET -Uri http://169.254.169.254/metadata/instance/compute/userData?api-version=2021-01-01$([char]38)format=text); $contents = [System.Text.Encoding]::UTF8.GetString([Convert]::FromBase64String($userData)); set-content -path c:\\Windows\\Temp\\userdata.ps1 -value $contents; . c:\\Windows\\Temp\\userdata.ps1;\&quot;&quot;
user_data_file  = &quot;./scripts/userdata.ps1&quot;
</code></pre>
<p>&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x6CE8;&#x5165; CustomScriptExtension&#xFF0C;&#x5728; Windows &#x6784;&#x5EFA;&#x542F;&#x52A8;&#x540E;&#xFF0C;&#x901A;&#x4FE1;&#x5668;&#x5C1D;&#x8BD5;&#x8FDE;&#x63A5;&#x4E4B;&#x524D;&#x8FD0;&#x884C;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/custom-script-windows" target="_blank">&#x6587;&#x6863;</a>&#x4E86;&#x89E3;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#x3002;</p>
<ul>
<li><code>plan_info</code> (PlanInformation) - &#x7528;&#x4E8E;&#x4ECE; Marketplace &#x955C;&#x50CF;&#x521B;&#x5EFA;&#x955C;&#x50CF;&#x3002;&#x6709;&#x5173;&#x66F4;&#x591A;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;<a href="https://aka.ms/azuremarketplaceapideployment" target="_blank">&#x4F7F;&#x7528; Marketplace &#x6761;&#x6B3E;&#x90E8;&#x7F72;&#x955C;&#x50CF;</a>&#x3002;&#x5E76;&#x975E;&#x6240;&#x6709; Marketplace &#x955C;&#x50CF;&#x90FD;&#x652F;&#x6301;&#x7A0B;&#x5E8F;&#x5316;&#x90E8;&#x7F72;&#xFF0C;&#x5E76;&#x4E14;&#x955C;&#x50CF;&#x7684;&#x652F;&#x6301;&#x662F;&#x7531;&#x955C;&#x50CF;&#x53D1;&#x5E03;&#x8005;&#x63A7;&#x5236;&#x7684;&#x3002;</li>
</ul>
<p>&#x4E0B;&#x9762;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x793A;&#x4F8B; plan_info &#x5BF9;&#x8C61;&#x3002;</p>
<pre class="language-"><code class="lang-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;plan_info&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;plan_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rabbitmq&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;plan_product&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rabbitmq&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;plan_publisher&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bitnami&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<ul>
<li><code>plan_name</code> (string) - &#x8BA1;&#x5212;&#x540D;&#x79F0;&#xFF0C;&#x5FC5;&#x9700;&#x3002; </li>
<li><code>plan_product</code> (string) - &#x8BA1;&#x5212;&#x4EA7;&#x54C1;&#xFF0C;&#x5FC5;&#x9700;&#x3002; </li>
<li><code>plan_publisher</code> (string) - &#x8BA1;&#x5212;&#x53D1;&#x5E03;&#x8005;&#xFF0C;&#x5FC5;&#x9700;&#x3002; </li>
<li><code>plan_promotion_code</code> (string) - &#x4E00;&#x4E9B;&#x955C;&#x50CF;&#x53EF;&#x4EE5;&#x914D;&#x7F6E;&#x4FC3;&#x9500;&#x4EE3;&#x7801;&#xFF0C;&#x53EF;&#x9009;&#x3002;</li>
</ul>
<p>&#x4F7F;&#x7528; <code>plan_info</code> &#x4ECE; Marketplace &#x521B;&#x5EFA;&#x7684;&#x6620;&#x50CF;<strong>&#x5FC5;&#x987B;</strong>&#x5728;&#x90E8;&#x7F72;&#x955C;&#x50CF;&#x65F6;&#x6307;&#x5B9A; <code>plan_info</code>&#x3002;&#x6784;&#x5EFA;&#x5668;&#x4F1A;&#x81EA;&#x52A8;&#x5C06;&#x4EE5;&#x4E0B;&#x6807;&#x7B7E;&#x6DFB;&#x52A0;&#x5230;&#x955C;&#x50CF;&#x4EE5;&#x786E;&#x4FDD;&#x6B64;&#x4FE1;&#x606F;&#x4E0D;&#x4F1A;&#x4E22;&#x5931;&#xFF1A;</p>
<pre class="language-"><code class="lang-text">1.  PlanName
2.  PlanProduct
3.  PlanPublisher
4.  PlanPromotionCode
</code></pre>
<ul>
<li><code>polling_duration_timeout</code> (duration string | ex: <code>&quot;1h5m2s&quot;</code>) - azure &#x7684;&#x9ED8;&#x8BA4; PollingDuration &#x4E3A; 15 &#x5206;&#x949F;&#xFF0C;&#x672C;&#x53C2;&#x6570;&#x5C06;&#x8986;&#x76D6;&#x8BE5;&#x503C;&#x3002;&#x8BF7;&#x53C2;&#x9605; <a href="https://godoc.org/github.com/Azure/go-autorest/autorest#pkg-constants" target="_blank">Azure DefaultPollingDuration</a>&#x3002;&#x5982;&#x679C;&#x60A8;&#x7684; Packer &#x6784;&#x5EFA;&#x5728; ARM &#x90E8;&#x7F72;&#x65F6;&#x5931;&#x8D25;&#x5E76;&#x51FA;&#x73B0;&#x9519;&#x8BEF; <code>Original Error: context deadline exceeded</code>&#xFF0C;&#x90A3;&#x4E48;&#x60A8;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x5C06;&#x6B64;&#x8D85;&#x65F6;&#x4ECE;&#x5176;&#x9ED8;&#x8BA4;&#x503C; <code>15m</code> &#x589E;&#x52A0;&#xFF08;&#x6709;&#x6548;&#x65F6;&#x95F4;&#x5355;&#x4F4D;&#x5305;&#x62EC; <code>s</code> &#x8868;&#x793A;&#x79D2;&#xFF0C;<code>m</code> &#x8868;&#x793A;&#x5206;&#x949F;&#xFF0C;<code>h</code> &#x4EE3;&#x8868;&#x5C0F;&#x65F6;&#x3002;&#xFF09;</li>
<li><code>os_type</code> (string) - &#x5982;&#x679C;&#x6307;&#x5B9A;&#x4E86; Linux &#x6216; Windows&#xFF0C;Packer &#x5C06;&#x81EA;&#x52A8;&#x4E3A;&#x8981;&#x914D;&#x7F6E;&#x7684;&#x673A;&#x5668;&#x914D;&#x7F6E;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x51ED;&#x636E;&#x3002;&#x5BF9;&#x4E8E; Linux&#xFF0C;&#x4F1A;&#x914D;&#x7F6E; SSH &#x6388;&#x6743;&#x5BC6;&#x94A5;&#x3002;&#x5BF9;&#x4E8E; Windows&#xFF0C;&#x4F1A;&#x914D;&#x7F6E;&#x4E00;&#x4E2A; WinRM &#x8BC1;&#x4E66;&#x3002;</li>
<li><code>temp_os_disk_name</code> (string) - &#x5206;&#x914D;&#x7ED9; OSDisk &#x7684;&#x4E34;&#x65F6;&#x540D;&#x79F0;&#x3002;&#x5982;&#x679C;&#x672A;&#x8BBE;&#x7F6E;&#x6B64;&#x503C;&#xFF0C;&#x5C06;&#x5206;&#x914D;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x503C;&#x3002;&#x5982;&#x679C;&#x80FD;&#x591F;&#x5206;&#x914D;&#x9075;&#x5FAA;&#x547D;&#x540D;&#x7EA6;&#x5B9A;&#x89C4;&#x8303;&#x7684;&#x81EA;&#x5B9A;&#x4E49; osDiskName &#x540D;&#x79F0;&#x53EF;&#x4EE5;&#x7B80;&#x5316;&#x90E8;&#x7F72;&#x3002;</li>
<li><code>os_disk_size_gb</code> (int32) - &#x4EE5; GB&#xFF08;&#x5343;&#x5146;&#x5B57;&#x8282;&#xFF09;&#x4E3A;&#x5355;&#x4F4D;&#x6307;&#x5B9A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x78C1;&#x76D8;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x8BBE;&#x7F6E;&#x4F4D;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;&#x96F6;&#x7684;&#x503C;&#x4F1A;&#x88AB;&#x5FFD;&#x7565;&#x3002;</li>
<li><code>disk_additional_size</code> ([]int32) - &#x865A;&#x62DF;&#x673A;&#x7684;&#x989D;&#x5916;&#x9644;&#x52A0;&#x786C;&#x76D8;&#x7684;&#x5927;&#x5C0F;&#xFF08;&#x4EE5; GB &#x4E3A;&#x5355;&#x4F4D;&#xFF09;&#x3002;&#x5982;&#x679C;&#x672A;&#x6307;&#x5B9A;&#xFF0C;&#x5219;&#x865A;&#x62DF;&#x673A;&#x5C06;&#x4EC5;&#x5305;&#x542B;&#x4E00;&#x4E2A; OS &#x78C1;&#x76D8;&#x3002;&#x989D;&#x5916;&#x78C1;&#x76D8;&#x7684;&#x6570;&#x91CF;&#x548C;&#x78C1;&#x76D8;&#x7684;&#x6700;&#x5927;&#x5927;&#x5C0F;&#x53D6;&#x51B3;&#x4E8E;&#x865A;&#x62DF;&#x673A;&#x7684;&#x914D;&#x7F6E;&#x3002;&#x6709;&#x5173;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605; <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/about-disks-and-vhds" target="_blank">Windows</a> &#x6216; <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/about-disks-and-vhds" target="_blank">Linux</a>&#x3002;</li>
</ul>
<p>&#x5BF9;&#x4E8E; VHD &#x6784;&#x5EFA;&#xFF0C;&#x6700;&#x7EC8;&#x5236;&#x54C1;&#x5C06;&#x88AB;&#x547D;&#x540D;&#x4E3A; <code>PREFIX-dataDisk-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>n</span><span class="token punctuation">&gt;</span></span>.UUID.vhd</code> &#x5E76;&#x4E0E;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x78C1;&#x76D8;&#x4E00;&#x8D77;&#x5B58;&#x50A8;&#x5728;&#x6307;&#x5B9A;&#x7684;&#x5B58;&#x50A8;&#x5BB9;&#x5668;&#x4E2D;&#x3002;&#x989D;&#x5916;&#x7684;&#x78C1;&#x76D8;&#x5305;&#x542B;&#x540D;&#x4E3A; <code>PREFIX-vmTemplate.UUID</code> &#x7684;&#x90E8;&#x7F72;&#x6A21;&#x677F;&#x4E2D;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x7684;&#x6784;&#x5EFA;&#xFF0C;&#x6700;&#x7EC8;&#x5236;&#x54C1;&#x5305;&#x542B;&#x5728;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x4E2D;&#x3002;&#x9644;&#x52A0;&#x7684;&#x78C1;&#x76D8;&#x5C06;&#x5177;&#x6709;&#x4E0E; OS &#x78C1;&#x76D8;&#x76F8;&#x540C;&#x7684;&#x5B58;&#x50A8;&#x5E10;&#x6237;&#x7C7B;&#x578B;&#xFF0C;&#x7531; <code>managed_image_storage_account_type</code> &#x53C2;&#x6570;&#x6240;&#x6307;&#x5B9A;&#x3002;</p>
<ul>
<li><code>disk_caching_type</code> (string) - &#x6307;&#x5B9A;&#x78C1;&#x76D8;&#x7F13;&#x5B58;&#x7C7B;&#x578B;&#x3002;&#x6709;&#x6548;&#x503C;&#x4E3A; <code>None</code>&#x3001;<code>ReadOnly</code> &#x548C; <code>ReadWrite</code>&#x3002;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A; <code>ReadWrite</code>&#x3002;</li>
<li><code>allowed_inbound_ip_addresses</code> ([]string) - &#x6307;&#x5B9A;&#x5E94;&#x5141;&#x8BB8;&#x8BBF;&#x95EE;&#x865A;&#x62DF;&#x673A;&#x7684; IP &#x5730;&#x5740;&#x548C; CIDR &#x5757;&#x7684;&#x5217;&#x8868;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#xFF0C;&#x5C06;&#x4F7F;&#x7528;&#x76F8;&#x5E94;&#x7684;&#x89C4;&#x5219;&#x521B;&#x5EFA; Azure &#x7F51;&#x7EDC;&#x5B89;&#x5168;&#x7EC4;&#x5E76;&#x7ED1;&#x5B9A;&#x5230;&#x865A;&#x62DF;&#x673A;&#x7684;&#x5B50;&#x7F51;&#x3002;&#x4E0D;&#x5141;&#x8BB8;&#x540C;&#x65F6;&#x8BBE;&#x7F6E; <code>allowed_inbound_ip_addresses</code> &#x4E0E; <code>virtual_network_name</code>&#x3002;</li>
<li><code>boot_diag_storage_account</code>&#xFF08;string&#xFF09;- &#x6307;&#x5B9A;&#x7528;&#x4E8E;&#x5B58;&#x50A8;&#x542F;&#x52A8;&#x8BCA;&#x65AD;&#x7684;&#x5B58;&#x50A8;&#x8D26;&#x6237; &#x2014;&#x2014; &#x8BBE;&#x7F6E;&#x8BE5;&#x53C2;&#x6570;&#x5C06;&#x5728;&#x6307;&#x5B9A;&#x7684;&#x5B58;&#x50A8;&#x5E10;&#x6237;&#x4E2D;&#x521B;&#x5EFA; 2 &#x4E2A;&#x6587;&#x4EF6;&#xFF08;&#x4E32;&#x884C;&#x63A7;&#x5236;&#x53F0;&#x65E5;&#x5FD7;&#x548C;&#x5C4F;&#x5E55;&#x622A;&#x56FE;&#x6587;&#x4EF6;&#xFF09;&#x3002;&#x6784;&#x5EFA;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x5FC5;&#x987B;&#x624B;&#x52A8;&#x5C06;&#x5176;&#x5220;&#x9664;&#x3002;&#x5728;<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/troubleshooting/boot-diagnostics" target="_blank">&#x8FD9;&#x91CC;</a>&#x67E5;&#x770B;&#x66F4;&#x591A;&#x4FE1;&#x606F;</li>
<li><code>custom_resource_build_prefix</code>&#xFF08;string&#xFF09;- &#x5728;&#x6784;&#x5EFA;&#x671F;&#x95F4;&#x6307;&#x5B9A;&#x81EA;&#x5B9A;&#x4E49; Azure &#x8D44;&#x6E90;&#x540D;&#x79F0;&#xFF0C;&#x9650;&#x5236;&#x4E3A;&#x6700;&#x591A; 10 &#x4E2A;&#x5B57;&#x7B26;&#xFF0C;&#x8FD9;&#x5C06;&#x4E3A;&#x8D44;&#x6E90;&#x540D;&#x79F0;&#x8BBE;&#x7F6E;&#x524D;&#x7F00;&#x3002;&#x5B9E;&#x9645;&#x8D44;&#x6E90;&#x540D;&#x79F0;&#x5C06;&#x662F; <code>custom_resource_build_prefix</code> + <code>resourcetype</code> + 5 &#x4E2A;&#x5B57;&#x7B26;&#x7684;&#x968F;&#x673A;&#x5B57;&#x6BCD;&#x6570;&#x5B57;&#x5B57;&#x7B26;&#x4E32;</li>
<li><p><code>license_type</code>&#xFF08;string&#xFF09;- &#x4E3A;&#x6784;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#x6307;&#x5B9A;&#x8BB8;&#x53EF;&#x8BC1;&#x7C7B;&#x578B;&#x4EE5;&#x542F;&#x7528; Azure &#x6DF7;&#x5408;&#x6743;&#x76CA;&#x3002;&#x5982;&#x679C;&#x672A;&#x8BBE;&#x7F6E;&#xFF0C;&#x5C06;&#x4F7F;&#x7528;&#x73B0;&#x6536;&#x73B0;&#x4ED8;(Pay-As-You-Go)&#x8BB8;&#x53EF;&#x6A21;&#x5F0F;&#xFF08;&#x9ED8;&#x8BA4;&#xFF09;&#x3002;&#x6709;&#x6548;&#x503C;&#x4E3A;&#xFF1A;
&#x5BF9;&#x4E8E; Windows&#xFF1A;</p>
<ul>
<li><a href="https://developer.hashicorp.com/packer/plugins/builders/azure/arm#windows_client" target="_blank">Windows_Client</a></li>
<li><a href="https://developer.hashicorp.com/packer/plugins/builders/azure/arm#windows_server" target="_blank">Windows_Server</a>
&#x5BF9;&#x4E8E; Linux&#xFF1A;</li>
<li><a href="https://developer.hashicorp.com/packer/plugins/builders/azure/arm#rhel_byos" target="_blank">RHEL_BYOS</a></li>
<li><a href="https://developer.hashicorp.com/packer/plugins/builders/azure/arm#sles_byos" target="_blank">SLES_BYOS</a>
&#x6709;&#x5173;&#x6DF7;&#x5408;&#x6743;&#x76CA;&#x7684;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;&#x4EE5;&#x4E0B;&#x6587;&#x6863;&#xFF1A;<a href="https://learn.microsoft.com/en-us/azure/virtual-machines/windows/hybrid-use-benefit-licensing" target="_blank">Windows</a> &#x4EE5;&#x53CA; <a href="https://learn.microsoft.com/en-us/azure/virtual-machines/linux/azure-hybrid-benefit-linux" target="_blank">Linux</a></li>
</ul>
</li>
<li><p><code>secure_boot_enabled</code> (bool) - &#x6307;&#x5B9A;&#x662F;&#x5426;&#x4E3A;&#x865A;&#x62DF;&#x673A;&#x542F;&#x7528;&#x5B89;&#x5168;&#x5F15;&#x5BFC;&#x548C;&#x53EF;&#x4FE1;&#x542F;&#x52A8;&#x3002;</p>
</li>
<li><code>vtpm_enabled</code> (bool) - &#x6307;&#x5B9A;&#x662F;&#x5426;&#x4E3A;&#x865A;&#x62DF;&#x673A;&#x542F;&#x7528; vTPM&#xFF08;&#x865A;&#x62DF;&#x53EF;&#x4FE1;&#x5E73;&#x53F0;&#x6A21;&#x5757;&#xFF09;&#x548C;&#x53EF;&#x4FE1;&#x542F;&#x52A8;&#x3002;</li>
<li><code>async_resourcegroup_delete</code> (bool) - &#x5982;&#x679C;&#x4F60;&#x60F3;&#x8BA9; Packer &#x5F02;&#x6B65;&#x5220;&#x9664;&#x4E34;&#x65F6;&#x8D44;&#x6E90;&#x7EC4;&#x65F6;&#x8BBE;&#x7F6E;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x3002;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x5E03;&#x5C14;&#x503C;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; <code>false</code>&#x3002;&#x5C06;&#x6B64;&#x8BBE;&#x7F6E;&#x4E3A; <code>true</code> &#x610F;&#x5473;&#x7740;&#x60A8;&#x7684;&#x6784;&#x5EFA;&#x901F;&#x5EA6;&#x66F4;&#x5FEB;&#xFF0C;&#x4F46;&#x662F;&#x5220;&#x9664;&#x8D44;&#x6E90;&#x7EC4;&#x5931;&#x8D25;&#x65F6;&#x4E0D;&#x4F1A;&#x62A5;&#x9519;&#x3002;</li>
<li><code>cloud_environment_name</code>&#xFF08;string&#xFF09;- <code>Public</code>&#x3001;<code>China</code>&#x3001;<code>Germany</code> &#x6216; <code>USGovernment</code> &#x4E4B;&#x4E00;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A; <code>Public</code>&#x3002;&#x8FD8;&#x652F;&#x6301; <code>USGovernmentCloud</code> &#x548C; <code>AzureUSGovernmentCloud</code> &#x7B49;&#x957F;&#x683C;&#x5F0F;&#x3002;</li>
<li><code>metadata_host</code>&#xFF08;string&#xFF09;- Azure &#x5143;&#x6570;&#x636E;&#x670D;&#x52A1;&#x7684;&#x4E3B;&#x673A;&#x540D;&#xFF08;&#x4F8B;&#x5982; management.azure.com&#xFF09;&#xFF0C;&#x7528;&#x4E8E;&#x5728;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49; Azure &#x73AF;&#x5883;&#x65F6;&#x83B7;&#x53D6;&#x4E91;&#x73AF;&#x5883;&#x3002;&#x8FD9;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; <code>ARM_METADATA_HOST</code> &#x73AF;&#x5883;&#x53D8;&#x91CF;&#x8BBE;&#x7F6E;&#x8BE5;&#x53C2;&#x6570;&#x3002;&#x6CE8;&#x610F;&#xFF1A;<code>cloud_environment_name</code> &#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#x4E3A; <code>metadata_host</code> &#x4E2D;&#x53EF;&#x7528;&#x73AF;&#x5883;&#x5217;&#x8868;&#x4E2D;&#x8BF7;&#x6C42;&#x7684;&#x73AF;&#x5883;&#x540D;&#x79F0;&#x3002;</li>
<li><code>client_id</code>&#xFF08;string&#xFF09;- AAD &#x670D;&#x52A1;&#x4E3B;&#x4F53;&#x7684; Application ID&#x3002;&#x8FD8;&#x9700;&#x8981;&#x8BBE;&#x7F6E; <code>client_secret</code>&#x3001;<code>client_cert_path</code> &#x6216; <code>client_jwt</code>&#x3002;</li>
<li><code>client_secret</code>&#xFF08;string&#xFF09;- &#x4E3A; AAD &#x670D;&#x52A1;&#x4E3B;&#x4F53;&#x6CE8;&#x518C;&#x7684;&#x5BC6;&#x7801;/&#x673A;&#x5BC6;&#x3002;</li>
<li><code>client_cert_path</code>&#xFF08;string&#xFF09;- &#x5C06;&#x7528;&#x4E8E;&#x4F5C;&#x4E3A;&#x6307;&#x5B9A; AAD &#x670D;&#x52A1;&#x4E3B;&#x4F53;&#x8FDB;&#x884C;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x7684; pem &#x7F16;&#x7801;&#x8BC1;&#x4E66;&#x7684;&#x8DEF;&#x5F84;&#x3002;</li>
<li><code>client_cert_token_timeout</code> (duration string | ex: &quot;1h5m2s&quot;) - &#x4F7F;&#x7528;<a href="https://developer.hashicorp.com/packer/plugins/builders/azure/arm#client_cert_path" target="_blank">&#x5BA2;&#x6237;&#x7AEF;&#x8BC1;&#x4E66;</a>&#x65F6; JWT &#x4EE4;&#x724C;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A; 1 &#x5C0F;&#x65F6;&#x3002;</li>
<li><code>client_jwt</code>&#xFF08;string&#xFF09;- &#x7528;&#x4E8E;&#x5BA2;&#x6237;&#x7AEF;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#xFF08;RFC 7523&#xFF0C;&#x7B2C; 2.2 &#x8282;&#xFF09;&#x7684; JWT &#x627F;&#x8F7D;&#x4EE4;&#x724C;&#xFF0C;&#x5C06;&#x7528;&#x4E8E;&#x5BF9; AAD &#x670D;&#x52A1;&#x4E3B;&#x4F53;&#x8FDB;&#x884C;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x3002;&#x4E0E;&#x4F7F;&#x7528; <code>client_cert_path</code> &#x76F8;&#x6BD4;&#xFF0C;&#x5728;&#x4F7F;&#x7528;&#x8BC1;&#x4E66;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x65F6;&#x62E5;&#x6709;&#x5BF9;&#x4EE4;&#x724C;&#x8FC7;&#x671F;&#x7684;&#x66F4;&#x7EC6;&#x81F4;&#x63A7;&#x5236;&#x80FD;&#x529B;&#x3002;</li>
<li><code>object_id</code>&#xFF08;string&#xFF09;- AAD &#x670D;&#x52A1;&#x4E3B;&#x4F53;&#x7684; Object ID&#x3002;&#x53EF;&#x9009;&#xFF0C;&#x5982;&#x679C;&#x7559;&#x7A7A;&#xFF0C;&#x5C06;&#x4ECE; oAuth &#x4EE4;&#x724C;&#x6D3E;&#x751F;&#x3002;</li>
<li><code>tenant_id</code>&#xFF08;string&#xFF09;- &#x4E0E;&#x60A8;&#x7684; <code>client_id</code> &#x548C; <code>subscription_id</code> &#x5173;&#x8054;&#x7684; Active Directory &#x79DF;&#x6237;&#x6807;&#x8BC6;&#x7B26;&#x3002;&#x5982;&#x679C;&#x672A;&#x6307;&#x5B9A;&#xFF0C;&#x5C06;&#x4F7F;&#x7528; <code>subscription_id</code> &#x67E5;&#x627E; <code>tenant_id</code>&#x3002;</li>
<li><code>subscription_id</code> (string) - &#x8981;&#x4F7F;&#x7528;&#x7684;&#x8BA2;&#x9605; ID&#x3002;</li>
<li><code>use_azure_cli_auth</code> (bool) - &#x4F7F;&#x7528; Azure CLI &#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x7684;&#x53C2;&#x6570;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A; <code>false</code>&#x3002; CLI &#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x5C06;&#x4F7F;&#x7528;&#x6765;&#x81EA;&#x6D3B;&#x52A8; <code>az login</code> &#x4F1A;&#x8BDD;&#x7684;&#x4FE1;&#x606F;&#x8FDE;&#x63A5;&#x5230; Azure&#xFF0C;&#x5E76;&#x8BBE;&#x7F6E;&#x4E0E;&#x767B;&#x5F55;&#x5E10;&#x6237;&#x5173;&#x8054;&#x7684;&#x8BA2;&#x9605; ID &#x548C;&#x79DF;&#x6237; ID&#x3002;&#x5982;&#x679C;&#x542F;&#x7528;&#xFF0C;&#x5B83;&#x5C06;&#x4F7F;&#x7528; <code>az</code> CLI &#x63D0;&#x4F9B;&#x7684;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x3002; Azure CLI &#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x5C06;&#x4F7F;&#x7528;&#x6807;&#x8BB0;&#x4E3A; <code>isDefault</code> &#x7684;&#x51ED;&#x636E;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>az account show</code> &#x8FDB;&#x884C;&#x9A8C;&#x8BC1;&#x3002;&#x53EF;&#x4EE5;&#x642D;&#x914D;&#x666E;&#x901A;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1; (<code>az login</code>) &#x548C;&#x670D;&#x52A1;&#x4E3B;&#x4F53; (<code>az login --service-principal --username APP_ID --password PASSWORD --tenant TENANT_ID</code>)&#x9A8C;&#x8BC1;&#x3002;&#x5982;&#x679C;&#x542F;&#x7528;&#x5219;&#x5FFD;&#x7565;&#x6240;&#x6709;&#x5176;&#x4ED6;&#x914D;&#x7F6E;&#x3002;</li>
<li><code>use_interactive_auth</code> (bool) - &#x4F7F;&#x7528;&#x4EA4;&#x4E92;&#x5F0F;&#x767B;&#x5F55;&#xFF08;&#x4F7F;&#x7528;&#x8BBE;&#x5907;&#x4EE3;&#x7801;&#xFF09;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x7684;&#x6807;&#x5FD7;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A; <code>false</code>&#x3002;&#x5982;&#x679C;&#x542F;&#x7528;&#xFF0C;&#x5B83;&#x5C06;&#x4F7F;&#x7528;&#x4EA4;&#x4E92;&#x5F0F;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x3002;</li>
<li><code>skip_create_image</code> (bool) - &#x8DF3;&#x8FC7;&#x521B;&#x5EFA;&#x955C;&#x50CF;&#x3002;&#x5728;&#x6784;&#x5EFA;&#x6D4B;&#x8BD5;&#x9636;&#x6BB5;&#x8BBE;&#x7F6E;&#x4E3A; <code>true</code> &#x5F88;&#x6709;&#x5E2E;&#x52A9;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A; <code>false</code>&#x3002;</li>
</ul>
<h3 id="&#x5171;&#x4EAB;&#x955C;&#x50CF;&#x5E93;">&#x5171;&#x4EAB;&#x955C;&#x50CF;&#x5E93;</h3>
<p>shared_image_gallery_destination &#x5757;&#x53EF;&#x7528;&#x4E8E;&#x5C06;&#x65B0;&#x955C;&#x50CF;&#x7248;&#x672C;&#x53D1;&#x5E03;&#x5230;&#x73B0;&#x6709;&#x5171;&#x4EAB;&#x955C;&#x50CF;&#x5E93;&#x3002;</p>
<ul>
<li><code>subscription</code>&#xFF08;string&#xFF09;- &#x4F7F;&#x7528;&#x7684;&#x8BA2;&#x9605;</li>
<li><code>resource_group</code> (string) - &#x4F7F;&#x7528;&#x7684;&#x8D44;&#x6E90;&#x7EC4;</li>
<li><code>gallery_name</code>&#xFF08;string&#xFF09;- &#x4F7F;&#x7528;&#x7684;&#x955C;&#x50CF;&#x5E93;&#x540D;&#x79F0;</li>
<li><code>image_name</code> (string) - &#x955C;&#x50CF;&#x540D;&#x79F0;</li>
<li><code>image_version</code>&#xFF08;string&#xFF09;- &#x955C;&#x50CF;&#x7248;&#x672C;</li>
<li><code>replication_regions</code> ([]string) - &#x8981;&#x590D;&#x5236;&#x5230;&#x7684;&#x533A;&#x57DF;</li>
<li><code>storage_account_type</code>&#xFF08;string&#xFF09;- &#x4E3A;&#x5171;&#x4EAB;&#x955C;&#x50CF;&#x5E93;&#x955C;&#x50CF;&#x7248;&#x672C;&#x6307;&#x5B9A;&#x5B58;&#x50A8;&#x5E10;&#x6237;&#x7C7B;&#x578B;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A; <code>Standard_LRS</code>&#x3002;&#x53EF;&#x63A5;&#x53D7;&#x7684;&#x503C;&#x4E3A; <code>Standard_LRS``&#x3001;Standard_ZRS</code> &#x548C; <code>Premium_LRS</code>&#x3002;</li>
</ul>
<h2 id="&#x6784;&#x5EFA;&#x671F;&#x5171;&#x4EAB;&#x4FE1;&#x606F;&#x53D8;&#x91CF;">&#x6784;&#x5EFA;&#x671F;&#x5171;&#x4EAB;&#x4FE1;&#x606F;&#x53D8;&#x91CF;</h2>
<p>&#x672C;&#x6784;&#x5EFA;&#x5668;&#x4F1A;&#x751F;&#x6210;&#x4E00;&#x4E9B;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; JSON &#x6A21;&#x677F;&#x5F15;&#x64CE;&#x7684;&#x6784;&#x5EFA;&#x529F;&#x80FD;&#x548C; HCL2 &#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x53D8;&#x91CF;&#x4E0E;&#x914D;&#x7F6E;&#x5668;&#x548C;&#x540E;&#x5904;&#x7406;&#x5668;&#x5171;&#x4EAB;&#x7684;&#x6570;&#x636E;&#x3002;</p>
<p>&#x6784;&#x5EFA;&#x5668;&#x53EF;&#x7528;&#x7684;&#x751F;&#x6210;&#x53D8;&#x91CF;&#x662F;&#xFF1A;</p>
<ul>
<li><code>SourceImageName</code> - &#x90E8;&#x7F72;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x6E90;&#x955C;&#x50CF;&#x7684;&#x5168;&#x540D;&#x3002;&#x4F7F;&#x7528;&#x5171;&#x4EAB;&#x955C;&#x50CF;&#x65F6;&#xFF0C;&#x751F;&#x6210;&#x7684;&#x540D;&#x79F0;&#x5C06;&#x6307;&#x5411;&#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x6240;&#x8FF0;&#x7248;&#x672C;&#x7684;&#x5B9E;&#x9645;&#x6E90;&#x955C;&#x50CF;&#x3002;</li>
</ul>
<p>HCL &#x6837;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-hcl"><span class="token comment">// When accessing one of these variables from inside the builder, you need to</span>
<span class="token comment">// use the golang templating syntax. This is due to an architectural quirk that</span>
<span class="token comment">// won&apos;t be easily resolvable until legacy json templates are deprecated:</span>

source <span class="token string">&quot;azure-arm&quot;</span> <span class="token string">&quot;basic-example&quot;</span> <span class="token punctuation">{</span>
  <span class="token property">os_type</span> <span class="token punctuation">=</span> <span class="token string">&quot;Linux&quot;</span>
  <span class="token property">image_publisher</span> <span class="token punctuation">=</span> <span class="token string">&quot;Canonical&quot;</span>
  <span class="token property">image_offer</span> <span class="token punctuation">=</span> <span class="token string">&quot;UbuntuServer&quot;</span>
  <span class="token property">image_sku</span> <span class="token punctuation">=</span> <span class="token string">&quot;14.04.4-LTS&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment">// when accessing one of the variables from a provisioner or post-processor, use</span>
<span class="token comment">// hcl-syntax</span>
post-processor <span class="token string">&quot;manifest&quot;</span> <span class="token punctuation">{</span>
    <span class="token property">output</span> <span class="token punctuation">=</span> <span class="token string">&quot;manifest.json&quot;</span>
    <span class="token property">strip_path</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
    <span class="token property">custom_data</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span>
        <span class="token property">source_image_name</span> <span class="token punctuation">=</span> <span class="token string">&quot;<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span>build<span class="token punctuation">.</span>SourceImageName<span class="token punctuation">}</span></span>&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>JSON &#x6837;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-json"><span class="token property">&quot;post-processors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;manifest&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;output&quot;</span><span class="token operator">:</span> <span class="token string">&quot;manifest.json&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;strip_path&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;custom_data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;source_image_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{{ build `SourceImageName` }}&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre>
<h3 id="&#x901A;&#x4FE1;&#x5668;&#x914D;&#x7F6E;">&#x901A;&#x4FE1;&#x5668;&#x914D;&#x7F6E;</h3>
<p>&#x9664;&#x4E86;&#x6784;&#x5EFA;&#x5668;&#x9009;&#x9879;&#x4E4B;&#x5916;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x901A;&#x4FE1;&#x5668;&#xFF1A;</p>
<ul>
<li><code>communicator</code> (string) - Packer &#x76EE;&#x524D;&#x652F;&#x6301;&#x4E09;&#x79CD;&#x901A;&#x4FE1;&#x5668;&#xFF1A;<ul>
<li><code>none</code> - &#x4E0D;&#x4F7F;&#x7528;&#x901A;&#x4FE1;&#x5668;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86;&#x6B64;&#x9879;&#xFF0C;&#x5927;&#x591A;&#x6570;&#x914D;&#x7F6E;&#x5668;&#x4E5F;&#x65E0;&#x6CD5;&#x4F7F;&#x7528;&#x3002;</li>
<li><code>ssh</code> - &#x5C06;&#x5EFA;&#x7ACB;&#x5230;&#x673A;&#x5668;&#x7684; SSH &#x8FDE;&#x63A5;&#x3002;&#x901A;&#x5E38;&#x8FD9;&#x662F;&#x9ED8;&#x8BA4;&#x503C;&#x3002;</li>
<li><code>winrm</code> - &#x5C06;&#x5EFA;&#x7ACB; WinRM &#x8FDE;&#x63A5;&#x3002;
&#x9664;&#x4E86;&#x4E0A;&#x8FF0;&#x4E09;&#x79CD;&#x4E4B;&#x5916;&#xFF0C;&#x4E00;&#x4E9B;&#x6784;&#x5EFA;&#x5668;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x901A;&#x4FE1;&#x5668;&#x3002;&#x4F8B;&#x5982;&#xFF0C;Docker &#x6784;&#x5EFA;&#x5668;&#x6709;&#x4E00;&#x4E2A; <code>docker</code> &#x901A;&#x4FE1;&#x5668;&#xFF0C;&#x5B83;&#x4F7F;&#x7528; <code>docker exec</code> &#x548C; <code>docker cp</code> &#x6765;&#x6267;&#x884C;&#x811A;&#x672C;&#x548C;&#x590D;&#x5236;&#x6587;&#x4EF6;&#x3002;</li>
</ul>
</li>
<li><code>pause_before_connecting</code> (duration string | ex: &quot;1h5m2s&quot;) - &#x6211;&#x4EEC;&#x5EFA;&#x8BAE;&#x60A8;&#x5C06; SSH &#x6216; WinRM &#x4F5C;&#x4E3A;&#x8BBF;&#x5BA2;&#x5F15;&#x5BFC;&#x7A0B;&#x5E8F;&#x811A;&#x672C;&#x7684;&#x6700;&#x540E;&#x4E00;&#x6B65;&#xFF0C;&#x4F46;&#x6709;&#x65F6;&#x60A8;&#x53EF;&#x80FD;&#x4F1A;&#x9047;&#x5230;&#x5E76;&#x884C;&#x7ADE;&#x4E89;&#x573A;&#x666F;&#xFF0C;&#x60A8;&#x9700;&#x8981; Packer &#x5728;&#x5C1D;&#x8BD5;&#x8FDE;&#x63A5;&#x4E4B;&#x524D;&#x7B49;&#x5F85;&#x4F60;&#x7684;&#x865A;&#x62DF;&#x673A;&#x7CFB;&#x7EDF;&#x5C31;&#x7EEA;&#x3002;
&#x5982;&#x679C;&#x60A8;&#x9047;&#x5230;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6A21;&#x677F;&#x9009;&#x9879; <code>pause_before_connecting</code>&#x3002;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6CA1;&#x6709;&#x6682;&#x505C;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x60A8;&#x5C06; <code>pause_before_connecting</code> &#x8BBE;&#x7F6E;&#x4E3A; <code>10m</code>&#xFF0C;Packer &#x5C06;&#x68C0;&#x67E5;&#x5B83;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x8FDE;&#x63A5;&#x3002;&#x4F46;&#x662F;&#x4E00;&#x65E6;&#x8FDE;&#x63A5;&#x5C1D;&#x8BD5;&#x6210;&#x529F;&#xFF0C;&#x5B83;&#x5C06;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#xFF0C;&#x7136;&#x540E;&#x7B49;&#x5F85; 10 &#x5206;&#x949F;&#xFF0C;&#x7136;&#x540E;&#x8FDE;&#x63A5;&#x5230;&#x865A;&#x62DF;&#x673A;&#x5E76;&#x5F00;&#x59CB;&#x914D;&#x7F6E;&#x3002;</li>
<li><code>ssh_host</code> (string) - SSH &#x5230;&#x7684;&#x5730;&#x5740;&#x3002;&#x8FD9;&#x901A;&#x5E38;&#x7531;&#x6784;&#x5EFA;&#x5668;&#x81EA;&#x52A8;&#x914D;&#x7F6E;&#x3002;</li>
<li><code>ssh_port</code> (int) - &#x8FDE;&#x63A5;&#x5230; SSH &#x7684;&#x7AEF;&#x53E3;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A; <code>22</code>&#x3002;</li>
<li><code>ssh_username</code> (string) - &#x7528;&#x4E8E;&#x8FDE;&#x63A5; SSH &#x7684;&#x7528;&#x6237;&#x540D;&#x3002;&#x5982;&#x679C;&#x4F7F;&#x7528; SSH&#xFF0C;&#x5219;&#x5FC5;&#x586B;&#x3002;</li>
<li><code>ssh_password</code>&#xFF08;string&#xFF09;- &#x7528;&#x4E8E;&#x901A;&#x8FC7; SSH &#x8FDB;&#x884C;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x7684;&#x660E;&#x6587;&#x5BC6;&#x7801;&#x3002;</li>
<li><code>ssh_ciphers</code> ([]string) - &#x8FD9;&#x4F1A;&#x8986;&#x76D6; Golang &#x9ED8;&#x8BA4;&#x652F;&#x6301;&#x7684; Cipher&#x3002;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A; [ &quot;aes128-gcm@openssh.com&quot;, &quot;chacha20-poly1305@openssh.com&quot;, &quot;aes128-ctr&quot;, &quot;aes192-ctr&quot;, &quot;aes256-ctr&quot;, ]
&#x5BC6;&#x7801;&#x7684;&#x6709;&#x6548;&#x9009;&#x9879;&#x5305;&#x62EC;&#xFF1A;&#x201C;aes128-ctr&#x201D;&#x3001;&#x201C;aes192-ctr&#x201D;&#x3001;&#x201C;aes256-ctr&#x201D;&#x3001;&#x201C;aes128-gcm@openssh.com&#x201D;&#x3001;&#x201C;chacha20-poly1305@openssh.com&#x201D;&#x3001;&#x201C;arcfour256&#x201D;&#x3001;&#x201C;arcfour128&#x201D; &quot;, &quot;arcfour&quot;, &quot;aes128-cbc&quot;, &quot;3des-cbc&quot;,</li>
<li><code>ssh_clear_authorized_keys</code> (bool) - &#x5982;&#x679C;&#x4E3A; <code>true</code>&#xFF0C;Packer &#x5C06;&#x5C1D;&#x8BD5;&#x4ECE; <code>~/.ssh/authorized_keys</code> &#x548C; <code>/root/.ssh/authorized_keys</code> &#x4E2D;&#x5220;&#x9664;&#x5176;&#x4E34;&#x65F6;&#x5BC6;&#x94A5;&#x3002;&#x8FD9;&#x4E3B;&#x8981;&#x662F;&#x4E00;&#x4E2A;&#x88C5;&#x9970;&#x6027;&#x7684;&#x9009;&#x9879;&#xFF0C;&#x56E0;&#x4E3A;&#x65E0;&#x8BBA;&#x662F;&#x5426;&#x8BBE;&#x7F6E;&#x4E3A; <code>true</code>&#xFF0C;Packer &#x90FD;&#x4F1A;&#x4ECE;&#x4E3B;&#x673A;&#x7CFB;&#x7EDF;&#x4E2D;&#x5220;&#x9664;&#x4E34;&#x65F6;&#x79C1;&#x94A5;&#xFF08;&#x9664;&#x975E;&#x7528;&#x6237;&#x8BBE;&#x7F6E;&#x4E86; <code>-debug</code> &#x6807;&#x5FD7;&#xFF09;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A; <code>false</code>&#xFF1B;&#x76EE;&#x524D;&#x4EC5;&#x9002;&#x7528;&#x4E8E;&#x5B89;&#x88C5;&#x4E86; <code>sed</code> &#x7684;&#x7CFB;&#x7EDF;&#x3002;</li>
<li><code>ssh_key_exchange_algorithms</code> ([]string) - &#x5982;&#x679C;&#x8BBE;&#x7F6E;&#xFF0C;Packer &#x5C06;&#x8986;&#x76D6; Golang &#x9ED8;&#x8BA4;&#x652F;&#x6301;&#x7684;&#x5BC6;&#x94A5;&#x4EA4;&#x6362; (kex) &#x7B97;&#x6CD5;&#x7684;&#x503C;&#x3002;&#x53EF;&#x63A5;&#x53D7;&#x7684;&#x503C;&#x5305;&#x62EC;&#xFF1A;&quot;curve25519-sha256@libssh.org&quot;, &quot;ecdh-sha2-nistp256&quot;, &quot;ecdh-sha2-nistp384&quot;, &quot;ecdh-sha2-nistp521&quot;, &quot;diffie-hellman-group14-sha1&quot;, &#x4EE5;&#x53CA; &quot;diffie-hellman-group1-sha1&quot;&#x3002;</li>
<li><code>ssh_certificate_file</code>&#xFF08;string&#xFF09;- &#x7528;&#x4E8E;&#x901A;&#x8FC7; SSH &#x8FDB;&#x884C;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x7684;&#x7528;&#x6237;&#x8BC1;&#x4E66;&#x7684;&#x8DEF;&#x5F84;&#x3002; <code>~</code> &#x53EF;&#x4EE5;&#x5728;&#x8DEF;&#x5F84;&#x4E2D;&#x4F7F;&#x7528;&#xFF0C;&#x5C06;&#x6269;&#x5C55;&#x5230;&#x5F53;&#x524D;&#x7528;&#x6237;&#x7684;&#x4E3B;&#x76EE;&#x5F55;&#x3002;</li>
<li><code>ssh_pty</code> (bool) - &#x5982;&#x679C;&#x4E3A; <code>true</code>&#xFF0C;&#x5C06;&#x4E3A; SSH &#x8FDE;&#x63A5;&#x8BF7;&#x6C42; PTY&#x3002;&#x8FD9;&#x9ED8;&#x8BA4;&#x4E3A; <code>false</code>&#x3002;</li>
<li><code>ssh_timeout</code> (duration string | ex: &quot;1h5m2s&quot;) - &#x7B49;&#x5F85; SSH &#x53EF;&#x7528;&#x7684;&#x65F6;&#x95F4;&#x3002; Packer &#x4F7F;&#x7528;&#x5B83;&#x6765;&#x786E;&#x5B9A;&#x673A;&#x5668;&#x4F55;&#x65F6;&#x542F;&#x52A8;&#xFF0C;&#x56E0;&#x6B64;&#x8FD9;&#x901A;&#x5E38;&#x5F88;&#x957F;&#x3002;&#x793A;&#x4F8B;&#x503C;&#xFF1A;<code>10m</code>&#x3002;&#x9ED8;&#x8BA4;&#x4E3A; <code>5m</code>&#xFF0C;&#x9664;&#x975E;&#x8BBE;&#x7F6E;&#x4E86; <code>ssh_handshake_attempts</code>&#x3002;</li>
<li><code>ssh_disable_agent_forwarding</code> (bool) - &#x5982;&#x679C;&#x4E3A; <code>true</code>&#xFF0C;SSH &#x4EE3;&#x7406;&#x8F6C;&#x53D1;&#x5C06;&#x88AB;&#x7981;&#x7528;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A; <code>false</code>&#x3002;</li>
<li><code>ssh_handshake_attempts</code> (int) - &#x4E00;&#x65E6;&#x53EF;&#x4EE5;&#x8FDE;&#x63A5;&#xFF0C;&#x5C1D;&#x8BD5;&#x4F7F;&#x7528; SSH &#x7684;&#x63E1;&#x624B;&#x6B21;&#x6570;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A; <code>10</code>&#xFF0C;&#x9664;&#x975E;&#x8BBE;&#x7F6E;&#x4E86; <code>ssh_timeout</code>&#x3002;</li>
<li><code>ssh_bastion_host</code>&#xFF08;string&#xFF09;- &#x7528;&#x4E8E;&#x5B9E;&#x9645; SSH &#x8FDE;&#x63A5;&#x7684;&#x5821;&#x5792;&#x4E3B;&#x673A;&#x3002;</li>
<li><code>ssh_bastion_port</code> (int) - &#x5821;&#x5792;&#x4E3B;&#x673A;&#x7684;&#x7AEF;&#x53E3;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A; <code>22</code>&#x3002;</li>
<li><code>ssh_bastion_agent_auth</code> (bool) - &#x5982;&#x679C;&#x4E3A; <code>true</code>&#xFF0C;&#x5219;&#x5C06;&#x4F7F;&#x7528;&#x672C;&#x5730; SSH &#x4EE3;&#x7406;&#x5BF9;&#x5821;&#x5792;&#x4E3B;&#x673A;&#x8FDB;&#x884C;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A; <code>false</code>&#x3002;</li>
<li><code>ssh_bastion_username</code>&#xFF08;string&#xFF09;- &#x8FDE;&#x63A5;&#x5821;&#x5792;&#x4E3B;&#x673A;&#x7684;&#x7528;&#x6237;&#x540D;&#x3002;</li>
<li><code>ssh_bastion_password</code>&#xFF08;string&#xFF09;- &#x7528;&#x4E8E;&#x5411;&#x5821;&#x5792;&#x4E3B;&#x673A;&#x8FDB;&#x884C;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x7684;&#x5BC6;&#x7801;&#x3002;</li>
<li><code>ssh_bastion_interactive</code> (bool) - &#x5982;&#x679C;&#x4E3A; <code>true</code>&#xFF0C;&#x5219;&#x5C06;&#x4F7F;&#x7528;&#x952E;&#x76D8;&#x4EA4;&#x4E92;&#x65B9;&#x5F0F;&#x4E0E;&#x5821;&#x5792;&#x4E3B;&#x673A;&#x8FDB;&#x884C;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x3002;</li>
<li><code>ssh_bastion_private_key_file</code>&#xFF08;string&#xFF09;- &#x7528;&#x4E8E;&#x4E0E;&#x5821;&#x5792;&#x4E3B;&#x673A;&#x8FDB;&#x884C;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x7684; PEM &#x7F16;&#x7801;&#x79C1;&#x94A5;&#x6587;&#x4EF6;&#x7684;&#x8DEF;&#x5F84;&#x3002; <code>~</code> &#x53EF;&#x4EE5;&#x5728;&#x8DEF;&#x5F84;&#x4E2D;&#x4F7F;&#x7528;&#xFF0C;&#x5C06;&#x6269;&#x5C55;&#x5230;&#x5F53;&#x524D;&#x7528;&#x6237;&#x7684;&#x4E3B;&#x76EE;&#x5F55;&#x3002;</li>
<li><code>ssh_bastion_certificate_file</code>&#xFF08;string&#xFF09;- &#x7528;&#x4E8E;&#x4E0E;&#x5821;&#x5792;&#x4E3B;&#x673A;&#x8FDB;&#x884C;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x7684;&#x7528;&#x6237;&#x8BC1;&#x4E66;&#x7684;&#x8DEF;&#x5F84;&#x3002; <code>~</code> &#x53EF;&#x4EE5;&#x5728;&#x8DEF;&#x5F84;&#x4E2D;&#x4F7F;&#x7528;&#xFF0C;&#x5C06;&#x6269;&#x5C55;&#x5230;&#x5F53;&#x524D;&#x7528;&#x6237;&#x7684;&#x4E3B;&#x76EE;&#x5F55;&#x3002;</li>
<li><code>ssh_file_transfer_method</code> (string) - <code>scp</code> &#x6216; <code>sftp</code> - &#x5982;&#x4F55;&#x4F20;&#x8F93;&#x6587;&#x4EF6;&#x3001;<code>scp</code>&#xFF08;&#x9ED8;&#x8BA4;&#xFF09;&#x6216; <code>sftp</code>&#x3002;
&#x6CE8;&#x610F;&#xFF1A;&#x4F7F;&#x7528;&#x5E26;&#x6709; Win32-OpenSSH v9.1.0.0p1-Beta &#x7684; Windows &#x7684;&#x7528;&#x6237;&#xFF0C;scp&#xFF08;&#x7528;&#x4E8E;&#x590D;&#x5236;&#x6570;&#x636E;&#x7684;&#x9ED8;&#x8BA4;&#x534F;&#x8BAE;&#xFF09;&#x8FD4;&#x56DE;&#x975E;&#x96F6;&#x9519;&#x8BEF;&#x4EE3;&#x7801;&#xFF0C;&#x56E0;&#x4E3A;&#x65E0;&#x6CD5;&#x8BBE;&#x7F6E; MOTW&#xFF0C;&#x8FD9;&#x4F1A;&#x5BFC;&#x81F4;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x4F20;&#x8F93;&#x5931;&#x8D25;&#x3002;&#x4F5C;&#x4E3A;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; SFTP &#x66FF;&#x4EE3;&#x4F20;&#x8F93;&#x534F;&#x8BAE;&#xFF1A; <code>ssh_file_transfer_protocol = &quot;sftp&quot;</code>&#x3002;</li>
<li><code>ssh_proxy_host</code> (string) - &#x7528;&#x4E8E; SSH &#x8FDE;&#x63A5;&#x7684; SOCKS &#x4EE3;&#x7406;&#x4E3B;&#x673A;</li>
<li><code>ssh_proxy_port</code> (int) - SOCKS &#x4EE3;&#x7406;&#x7684;&#x7AEF;&#x53E3;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A; <code>1080</code>&#x3002;</li>
<li><code>ssh_proxy_username</code>&#xFF08;string&#xFF09;- &#x7528;&#x4E8E;&#x4F7F;&#x7528;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x884C;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x7684;&#x53EF;&#x9009;&#x7528;&#x6237;&#x540D;&#x3002;</li>
<li><code>ssh_proxy_password</code>&#xFF08;string&#xFF09;- &#x7528;&#x4E8E;&#x5411;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x884C;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x7684;&#x53EF;&#x9009;&#x5BC6;&#x7801;&#x3002;</li>
<li><code>ssh_keep_alive_interval</code> (duration string | ex: &quot;1h5m2s&quot;) - &#x5411;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001; &quot;keep alive&quot; &#x6D88;&#x606F;&#x7684;&#x9891;&#x7387;&#x3002;&#x8BBE;&#x7F6E;&#x4E3A;&#x8D1F;&#x503C; (<code>-1s</code>) &#x4EE5;&#x7981;&#x7528;&#x3002;&#x793A;&#x4F8B;&#x503C;&#xFF1A;<code>10s</code>&#x3002;&#x9ED8;&#x8BA4;&#x4E3A; <code>5s</code>&#x3002;</li>
<li><code>ssh_read_write_timeout</code> (duration string | ex: &quot;1h5m2s&quot;) - &#x7B49;&#x5F85;&#x8FDC;&#x7A0B;&#x547D;&#x4EE4;&#x7ED3;&#x675F;&#x7684;&#x65F6;&#x95F4;&#x3002;&#x8BE5;&#x53C2;&#x6570;&#x5728;&#x67D0;&#x4E9B;&#x65F6;&#x5019;&#x53EF;&#x80FD;&#x5F88;&#x6709;&#x7528;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C; Packer &#x7A0B;&#x5E8F;&#x5728;&#x670D;&#x52A1;&#x5668;&#x91CD;&#x542F;&#x540E;&#x6302;&#x8D77;&#x5728;&#x8FDE;&#x63A5;&#x4E0A;&#x3002;&#x793A;&#x4F8B;&#xFF1A;<code>5m</code>&#x3002;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x7981;&#x7528;&#x3002;</li>
<li><code>ssh_remote_tunnels</code> ([]string) -</li>
<li><code>ssh_local_tunnels</code> ([]string) -</li>
<li><code>ssh_private_key_file</code>&#xFF08;string&#xFF09;- &#x7528;&#x4E8E;&#x901A;&#x8FC7; SSH &#x8FDB;&#x884C;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x7684; PEM &#x7F16;&#x7801;&#x79C1;&#x94A5;&#x6587;&#x4EF6;&#x7684;&#x8DEF;&#x5F84;&#x3002; <code>~</code> &#x53EF;&#x4EE5;&#x5728;&#x8DEF;&#x5F84;&#x4E2D;&#x4F7F;&#x7528;&#xFF0C;&#x5C06;&#x6269;&#x5C55;&#x5230;&#x5F53;&#x524D;&#x7528;&#x6237;&#x7684;&#x4E3B;&#x76EE;&#x5F55;&#x3002;</li>
</ul>
<h2 id="&#x57FA;&#x7840;&#x6837;&#x4F8B;">&#x57FA;&#x7840;&#x6837;&#x4F8B;</h2>
<p>&#x8FD9;&#x91CC;&#x6709;&#x4E00;&#x4EFD;&#x57FA;&#x7840;&#x6837;&#x4F8B;&#xFF0C;HCL &#x7248;&#x672C;&#xFF1A;</p>
<pre class="language-"><code class="lang-hcl">source <span class="token string">&quot;azure-arm&quot;</span> <span class="token string">&quot;basic-example&quot;</span> <span class="token punctuation">{</span>
  <span class="token property">client_id</span> <span class="token punctuation">=</span> <span class="token string">&quot;fe354398-d7sf-4dc9-87fd-c432cd8a7e09&quot;</span>
  <span class="token property">client_secret</span> <span class="token punctuation">=</span> <span class="token string">&quot;keepitsecret&amp;#*$&quot;</span>
  <span class="token property">resource_group_name</span> <span class="token punctuation">=</span> <span class="token string">&quot;packerdemo&quot;</span>
  <span class="token property">storage_account</span> <span class="token punctuation">=</span> <span class="token string">&quot;virtualmachines&quot;</span>
  <span class="token property">subscription_id</span> <span class="token punctuation">=</span> <span class="token string">&quot;44cae533-4247-4093-42cf-897ded6e7823&quot;</span>
  <span class="token property">tenant_id</span> <span class="token punctuation">=</span> <span class="token string">&quot;de39842a-caba-497e-a798-7896aea43218&quot;</span>

  <span class="token property">capture_container_name</span> <span class="token punctuation">=</span> <span class="token string">&quot;images&quot;</span>
  <span class="token property">capture_name_prefix</span> <span class="token punctuation">=</span> <span class="token string">&quot;packer&quot;</span>

  <span class="token property">os_type</span> <span class="token punctuation">=</span> <span class="token string">&quot;Linux&quot;</span>
  <span class="token property">image_publisher</span> <span class="token punctuation">=</span> <span class="token string">&quot;Canonical&quot;</span>
  <span class="token property">image_offer</span> <span class="token punctuation">=</span> <span class="token string">&quot;UbuntuServer&quot;</span>
  <span class="token property">image_sku</span> <span class="token punctuation">=</span> <span class="token string">&quot;14.04.4-LTS&quot;</span>

  <span class="token property">azure_tags</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span>
    <span class="token property">dept</span> <span class="token punctuation">=</span> <span class="token string">&quot;engineering&quot;</span>
  <span class="token punctuation">}</span>

  <span class="token property">location</span> <span class="token punctuation">=</span> <span class="token string">&quot;West US&quot;</span>
  <span class="token property">vm_size</span> <span class="token punctuation">=</span> <span class="token string">&quot;Standard_A2&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">build</span> <span class="token punctuation">{</span>
  <span class="token property">sources</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;sources.azure-arm.basic-example&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>JSON &#x7248;&#x672C;&#xFF1A;</p>
<pre class="language-"><code class="lang-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;azure-arm&quot;</span><span class="token punctuation">,</span>

  <span class="token property">&quot;client_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fe354398-d7sf-4dc9-87fd-c432cd8a7e09&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;client_secret&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keepitsecret&amp;#*$&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;resource_group_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;packerdemo&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;storage_account&quot;</span><span class="token operator">:</span> <span class="token string">&quot;virtualmachines&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;subscription_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;44cae533-4247-4093-42cf-897ded6e7823&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tenant_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;de39842a-caba-497e-a798-7896aea43218&quot;</span><span class="token punctuation">,</span>

  <span class="token property">&quot;capture_container_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;images&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;capture_name_prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;packer&quot;</span><span class="token punctuation">,</span>

  <span class="token property">&quot;os_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Linux&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;image_publisher&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Canonical&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;image_offer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;UbuntuServer&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;image_sku&quot;</span><span class="token operator">:</span> <span class="token string">&quot;14.04.4-LTS&quot;</span><span class="token punctuation">,</span>

  <span class="token property">&quot;azure_tags&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dept&quot;</span><span class="token operator">:</span> <span class="token string">&quot;engineering&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token property">&quot;location&quot;</span><span class="token operator">:</span> <span class="token string">&quot;West US&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;vm_size&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Standard_A2&quot;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="&#x6E05;&#x7406;&#x914D;&#x7F6E;deprovision">&#x6E05;&#x7406;&#x914D;&#x7F6E;(Deprovision)</h2>
<p>Azure &#x865A;&#x62DF;&#x673A;&#x5728;&#x6BCF;&#x6B21;&#x6784;&#x5EFA;&#x7ED3;&#x675F;&#x65F6;&#x90FD;&#x5E94;&#x8BE5;&#x6267;&#x884C;&#x6E05;&#x7406;&#x914D;&#x7F6E;&#x3002;&#x5BF9;&#x4E8E; Windows&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x6267;&#x884C; sysprep&#xFF0C;&#x800C;&#x5BF9;&#x4E8E; Linux&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x6267;&#x884C; waagent &#x6E05;&#x7406;&#x914D;&#x7F6E;&#x6D41;&#x7A0B;&#x3002;
&#x8BF7;&#x53C2;&#x9605; Azure <a href="https://github.com/hashicorp/packer-plugin-azure/tree/main/example" target="_blank">&#x793A;&#x4F8B;</a>&#x6587;&#x4EF6;&#x5939;&#x4EE5;&#x83B7;&#x53D6;&#x663E;&#x793A;&#x6E05;&#x7406;&#x914D;&#x7F6E;&#x8FC7;&#x7A0B;&#x7684;&#x5B8C;&#x6574;&#x793A;&#x4F8B;&#x3002;</p>
<h3 id="windows">Windows</h3>
<p>&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x7247;&#x6BB5;&#x663E;&#x793A;&#x4E86;&#x5982;&#x4F55;&#x5BF9; Windows &#x865A;&#x62DF;&#x673A;&#x8FD0;&#x884C; sysprep&#x3002;&#x6E05;&#x7406;&#x914D;&#x7F6E;&#x5E94;&#x8BE5;&#x662F;&#x6784;&#x5EFA;&#x6267;&#x884C;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x3002;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x5C06;&#x7B49;&#x5F85; sysprep &#x5C06;&#x955C;&#x50CF;&#x72B6;&#x6001;&#x5199;&#x5165;&#x6CE8;&#x518C;&#x8868;&#xFF0C;&#x7136;&#x540E;&#x9000;&#x51FA;&#x3002;&#x5982;&#x679C;&#x4F60;&#x60F3;&#x7B49;&#x5F85;&#x4E0D;&#x540C;&#x7684;&#x72B6;&#x6001;&#xFF0C;<a href="https://technet.microsoft.com/en-us/library/hh824815.aspx" target="_blank">&#x8FD9;&#x91CC;</a>&#x8BB0;&#x5F55;&#x4E86;&#x53EF;&#x7528;&#x7684;&#x72B6;&#x6001;&#x3002;</p>
<p>HCL&#xFF1A;</p>
<pre class="language-"><code class="lang-hcl"><span class="token keyword">provisioner<span class="token type variable"> &quot;powershell&quot; </span></span><span class="token punctuation">{</span>
   <span class="token property">inline</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
        <span class="token string">&quot; # NOTE: the following *3* lines are only needed if the you have installed the Guest Agent.&quot;</span>,
        <span class="token string">&quot;  while ((Get-Service RdAgent).Status -ne &apos;Running&apos;) { Start-Sleep -s 5 }&quot;</span>,
        <span class="token string">&quot;  while ((Get-Service WindowsAzureTelemetryService).Status -ne &apos;Running&apos;) { Start-Sleep -s 5 }&quot;</span>,
        <span class="token string">&quot;  while ((Get-Service WindowsAzureGuestAgent).Status -ne &apos;Running&apos;) { Start-Sleep -s 5 }&quot;</span>,

        <span class="token string">&quot;&amp; $env:SystemRoot\\System32\\Sysprep\\Sysprep.exe /oobe /generalize /quiet /quit /mode:vm&quot;</span>,
        <span class="token string">&quot;while($true) { $imageState = Get-ItemProperty HKLM:\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Setup\\State | Select ImageState; if($imageState.ImageState -ne &apos;IMAGE_STATE_GENERALIZE_RESEAL_TO_OOBE&apos;) { Write-Output $imageState.ImageState; Start-Sleep -s 10  } else { break } }&quot;</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>JSON&#xFF1A;</p>
<pre class="language-"><code class="lang-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;provisioners&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;powershell&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;inline&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot; # NOTE: the following *3* lines are only needed if the you have installed the Guest Agent.&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;  while ((Get-Service RdAgent).Status -ne &apos;Running&apos;) { Start-Sleep -s 5 }&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;  while ((Get-Service WindowsAzureTelemetryService).Status -ne &apos;Running&apos;) { Start-Sleep -s 5 }&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;  while ((Get-Service WindowsAzureGuestAgent).Status -ne &apos;Running&apos;) { Start-Sleep -s 5 }&quot;</span><span class="token punctuation">,</span>

        <span class="token string">&quot;&amp; $env:SystemRoot\\System32\\Sysprep\\Sysprep.exe /oobe /generalize /quiet /quit /mode:vm&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;while($true) { $imageState = Get-ItemProperty HKLM:\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Setup\\State | Select ImageState; if($imageState.ImageState -ne &apos;IMAGE_STATE_GENERALIZE_RESEAL_TO_OOBE&apos;) { Write-Output $imageState.ImageState; Start-Sleep -s 10  } else { break } }&quot;</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Windows Guest Agent &#x53C2;&#x4E0E; Sysprep &#x8FDB;&#x7A0B;&#x3002;&#x4EE3;&#x7406;&#x5FC5;&#x987B;&#x5148;&#x5B8C;&#x6210;&#x5B89;&#x88C5;&#xFF0C;&#x7136;&#x540E;&#x624D;&#x80FD;&#x5BF9;&#x865A;&#x62DF;&#x673A;&#x8FD0;&#x884C; sysprep&#x3002;&#x4E3A;&#x786E;&#x4FDD;&#x8BE5;&#x524D;&#x7F6E;&#x6761;&#x4EF6;&#xFF0C;&#x6240;&#x6709;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x90FD;&#x5FC5;&#x987B;&#x5728;&#x6267;&#x884C; sysprep.exe &#x4E4B;&#x524D;&#x8FD0;&#x884C;&#x3002;&#x4E0A;&#x9762;&#x7684; JSON &#x7247;&#x6BB5;&#x663E;&#x793A;&#x4E86;&#x4E00;&#x79CD;&#x5728; PowerShell &#x914D;&#x7F6E;&#x5668;&#x4E2D;&#x6267;&#x884C;&#x6B64;&#x64CD;&#x4F5C;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x4EC5;&#x5F53; VM &#x914D;&#x7F6E;&#x4E3A;&#x5B89;&#x88C5;&#x4EE3;&#x7406;&#x65F6;&#x624D;&#x9700;&#x8981;&#x6B64;&#x4EE3;&#x7801;&#x6BB5;&#xFF0C;&#x8FD9;&#x662F;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;&#x3002;&#x8981;&#x4E86;&#x89E3;&#x6709;&#x5173;&#x7981;&#x7528; Windows &#x6765;&#x5BBE;&#x4EE3;&#x7406;&#x7684;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/agent-windows#install-the-vm-agent" target="_blank">&#x5B89;&#x88C5;&#x865A;&#x62DF;&#x673A;&#x4EE3;&#x7406;</a>&#x3002;</p>
<p>&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x5982;&#x679C;&#x914D;&#x7F6E;&#x4E0D;&#x6B63;&#x786E;&#xFF0C;sysprep &#x53EF;&#x80FD;&#x4F1A;&#x9677;&#x5165;&#x65E0;&#x9650;&#x5FAA;&#x73AF; &#x2014;&#x2014; &#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x5B83;&#x6B63;&#x5728;&#x7B49;&#x5F85;&#x60A8;&#x4ECE;&#x672A;&#x6267;&#x884C;&#x8FC7;&#x7684;&#x91CD;&#x542F;&#x3002;</p>
<h3 id="linux">Linux</h3>
<p>&#x4EE5;&#x4E0B;&#x914D;&#x7F6E;&#x4EE3;&#x7801;&#x7247;&#x6BB5;&#x663E;&#x793A;&#x4E86;&#x5982;&#x4F55;&#x6E05;&#x7406;&#x914D;&#x7F6E; Linux VM&#x3002;&#x6E05;&#x7406;&#x914D;&#x7F6E;&#x5E94;&#x8BE5;&#x662F;&#x6784;&#x5EFA;&#x6267;&#x884C;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x3002;</p>
<p>HCL&#xFF1A;</p>
<pre class="language-"><code class="lang-hcl"><span class="token keyword">provisioner<span class="token type variable"> &quot;shell&quot; </span></span><span class="token punctuation">{</span>
   <span class="token property">execute_command</span> <span class="token punctuation">=</span> <span class="token string">&quot;chmod +x {{ .Path }}; {{ .Vars }} sudo -E sh &apos;{{ .Path }}&apos;&quot;</span>
   <span class="token property">inline</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;/usr/sbin/waagent -force -deprovision+user &amp;&amp; export HISTSIZE=0 &amp;&amp; sync&quot;</span>
   <span class="token punctuation">]</span>
   <span class="token property">inline_shebang</span> <span class="token punctuation">=</span> <span class="token string">&quot;/bin/sh -x&quot;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>JSON&#xFF1A;</p>
<pre class="language-"><code class="lang-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;provisioners&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;execute_command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;chmod +x {{ .Path }}; {{ .Vars }} sudo -E sh &apos;{{ .Path }}&apos;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;inline&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;/usr/sbin/waagent -force -deprovision+user &amp;&amp; export HISTSIZE=0 &amp;&amp; sync&quot;</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;inline_shebang&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/bin/sh -x&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;shell&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8981;&#x4E86;&#x89E3;&#x6709;&#x5173; Linux &#x6E05;&#x7406;&#x914D;&#x7F6E;&#x8FC7;&#x7A0B;&#x7684;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605; WALinuxAgent &#x7684;<a href="https://github.com/Azure/WALinuxAgent/blob/master/README.md" target="_blank">&#x8BF4;&#x660E;</a>&#x3002;</p>
<h4 id="skipclean">skip_clean</h4>
<p>&#x6709;&#x5BA2;&#x6237;&#x62A5;&#x544A;&#x4E86;&#x5BFC;&#x81F4;&#x6784;&#x5EFA;&#x5668;&#x6302;&#x8D77;&#x7684;&#x6E05;&#x7406;&#x914D;&#x7F6E;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x9519;&#x8BEF;&#x6D88;&#x606F;&#x7C7B;&#x4F3C;&#x4E8E;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;&#xFF1A;</p>
<pre class="language-"><code class="lang-text">Build &apos;azure-arm&apos; errored: Retryable error: Error removing temporary script at /tmp/script_9899.sh: ssh: handshake failed: EOF
</code></pre>
<p>&#x4E00;&#x79CD;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x662F;&#x5728;&#x914D;&#x7F6E;&#x5668;&#x4E2D;&#x5C06; <code>skip_clean</code> &#x8BBE;&#x7F6E;&#x4E3A; <code>true</code>&#x3002;&#x8FD9;&#x53EF;&#x4EE5;&#x9632;&#x6B62; Packer &#x5728;&#x6784;&#x5EFA;&#x671F;&#x95F4;&#x6E05;&#x7406;&#x4E0A;&#x4F20;&#x5230;&#x865A;&#x62DF;&#x673A;&#x7684;&#x6240;&#x6709;&#x5E2E;&#x52A9;&#x811A;&#x672C;&#x3002;</p>
<h2 id="&#x9ED8;&#x8BA4;&#x503C;">&#x9ED8;&#x8BA4;&#x503C;</h2>
<p>Azure &#x6784;&#x5EFA;&#x5668;&#x5C1D;&#x8BD5;&#x9009;&#x62E9;&#x9ED8;&#x8BA4;&#x503C;&#x4EE5;&#x4F7F;&#x6784;&#x5EFA;&#x521A;&#x597D;&#x53EF;&#x4EE5;&#x5DE5;&#x4F5C;&#x3002;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x5C06;&#x8FD9;&#x4E9B;&#x503C;&#x66F4;&#x6539;&#x4E3A;&#x66F4;&#x5408;&#x9002;&#x7684;&#x503C;&#x3002;</p>
<ul>
<li>&#x9ED8;&#x8BA4;&#x7528;&#x6237;&#x540D;&#x662F; <code>Packer</code>&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5176;&#x4ED6;&#x6784;&#x5EFA;&#x5668;&#x4E2D;&#x7684; <code>root</code>&#x3002; Azure &#x4E0A;&#x7684;&#x5927;&#x591A;&#x6570;&#x53D1;&#x884C;&#x7248;&#x4E0D;&#x5141;&#x8BB8;&#x4F7F;&#x7528; <code>root</code> &#x901A;&#x8FC7; SSH &#x8FDE;&#x63A5;&#x5230;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x975E; <code>root</code> &#x9ED8;&#x8BA4;&#x7528;&#x6237;&#x3002;&#x8BBE;&#x7F6E; <code>ssh_username</code> &#x53C2;&#x6570;&#x4EE5;&#x8986;&#x76D6;&#x9ED8;&#x8BA4;&#x503C;&#x3002;</li>
<li>&#x9ED8;&#x8BA4;&#x7684;&#x865A;&#x62DF;&#x673A;&#x89C4;&#x683C;&#x4E3A; <code>Standard_A1</code>&#x3002;&#x8BBE;&#x7F6E; <code>vm_size</code> &#x53C2;&#x6570;&#x4EE5;&#x8986;&#x76D6;&#x9ED8;&#x8BA4;&#x503C;&#x3002;</li>
<li>&#x9ED8;&#x8BA4;&#x955C;&#x50CF;&#x7248;&#x672C;&#x662F; <code>latest</code>&#x3002;&#x8BBE;&#x7F6E; <code>image_version</code> &#x53C2;&#x6570;&#x4EE5;&#x8986;&#x76D6;&#x9ED8;&#x8BA4;&#x503C;&#x3002;</li>
<li>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4E00;&#x4E2A;&#x4E34;&#x65F6;&#x7684;&#x8D44;&#x6E90;&#x7EC4;&#x5C06;&#x4F5C;&#x4E3A;&#x6784;&#x5EFA;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x88AB;&#x521B;&#x5EFA;&#x548C;&#x9500;&#x6BC1;&#x3002;&#x5982;&#x679C;&#x60A8;&#x6CA1;&#x6709;&#x8FD9;&#x6837;&#x505A;&#x7684;&#x6743;&#x9650;&#xFF0C;&#x8BF7;&#x4F7F;&#x7528; <code>build_resource_group_name</code> &#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x73B0;&#x6709;&#x8D44;&#x6E90;&#x7EC4;&#x6765;&#x8FD0;&#x884C;&#x6784;&#x5EFA;&#x3002;</li>
</ul>
<h2 id="&#x5B9E;&#x73B0;">&#x5B9E;&#x73B0;</h2>
<p>&#x8B66;&#x544A;&#xFF01;&#x672C;&#x8282;&#x8BA8;&#x8BBA;&#x7684;&#x662F;&#x4E00;&#x4E9B;&#x6709;&#x5173;&#x5B9E;&#x73B0;&#x7EC6;&#x8282;&#x7684;&#x6DF1;&#x5EA6;&#x5185;&#x5BB9;&#x3002;&#x5982;&#x679C;&#x53EA;&#x662F;&#x4F7F;&#x7528; Azure &#x6784;&#x5EFA;&#x5668;&#x662F;&#x4E0D;&#x9700;&#x8981;&#x9605;&#x8BFB;&#x672C;&#x8282;&#x5185;&#x5BB9;&#x7684;&#x3002;</p>
<p>Azure &#x6784;&#x5EFA;&#x5668;&#x4F7F;&#x7528; <a href="https://azure.microsoft.com/en-us/documentation/articles/resource-group-authoring-templates/" target="_blank">ARM Template</a> &#x6765;&#x90E8;&#x7F72;&#x8D44;&#x6E90;&#x3002;ARM &#x6A21;&#x677F;&#x5141;&#x8BB8;&#x60A8;&#x58F0;&#x660E;&#x6240;&#x9700;&#x7684;&#x8D44;&#x6E90;&#xFF0C;&#x65E0;&#x9700;&#x63CF;&#x8FF0;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x3002;</p>
<p>Azure &#x6784;&#x5EFA;&#x5668;&#x7684;&#x5DE5;&#x4F5C;&#x7684;&#x524D;&#x63D0;&#x5047;&#x8BBE;&#x662F;&#x5B83;&#x521B;&#x5EFA;&#x4E86;&#x6267;&#x884C;&#x6784;&#x5EFA;&#x6240;&#x9700;&#x7684;&#x4E00;&#x5207;&#x3002;&#x6784;&#x5EFA;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x5B83;&#x4F1A;&#x7B80;&#x5355;&#x5730;&#x5220;&#x9664;&#x8D44;&#x6E90;&#x7EC4;&#x4EE5;&#x6E05;&#x7406;&#x6240;&#x6709;&#x8FD0;&#x884C;&#x65F6;&#x8D44;&#x6E90;&#x3002;&#x8D44;&#x6E90;&#x7EC4;&#x4F7F;&#x7528; <code>packer-Resource-Group-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>random</span><span class="token punctuation">&gt;</span></span></code> &#x7684;&#x5F62;&#x5F0F;&#x547D;&#x540D;&#x3002;&#x503C; <code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>random</span><span class="token punctuation">&gt;</span></span></code> &#x662F;&#x5728;&#x6BCF;&#x6B21;&#x8C03;&#x7528; packer &#x65F6;&#x751F;&#x6210;&#x7684;&#x968F;&#x673A;&#x503C;&#x3002; <code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>random</span><span class="token punctuation">&gt;</span></span></code> &#x503C;&#x5728;&#x547D;&#x540D;&#x8D44;&#x6E90;&#x65F6;&#x5C3D;&#x53EF;&#x80FD;&#x91CD;&#x590D;&#x4F7F;&#x7528;&#xFF0C;&#x56E0;&#x6B64;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x5728;&#x4ED6;&#x4EEC;&#x7684;&#x8BA2;&#x9605;&#x4E2D;&#x770B;&#x5230;&#x8FD9;&#x4E9B;&#x8FD9;&#x4E9B;&#x4E34;&#x65F6;&#x8D44;&#x6E90;&#x65F6;&#x66F4;&#x597D;&#x5730;&#x8FDB;&#x884C;&#x8BC6;&#x522B;&#x548C;&#x5206;&#x7C7B;&#x3002;</p>
<blockquote>
<p>VHD &#x662F;&#x5728;&#x4FDD;&#x5B58;&#x7528;&#x6237;&#x6307;&#x5B9A;&#x7684;&#x5B58;&#x50A8;&#x5E10;&#x6237;&#x5185;&#x7684;&#xFF0C;&#x8FD0;&#x884C;&#x65F6;&#x4E0D;&#x4F1A;&#x968F;&#x673A;&#x521B;&#x5EFA;&#x5B58;&#x50A8;&#x8D26;&#x6237;&#x3002;&#x4FDD;&#x5B58;&#x865A;&#x62DF;&#x673A;&#x65F6;&#xFF0C;&#x751F;&#x6210;&#x7684; VHD &#x5C06;&#x5B58;&#x50A8;&#x5728;&#x4E0E;&#x6E90; VHD &#x76F8;&#x540C;&#x7684;&#x5B58;&#x50A8;&#x5E10;&#x6237;&#x4E2D;&#x3002; Packer &#x521B;&#x5EFA;&#x7684; VHD &#x5FC5;&#x987B;&#x5728;&#x6784;&#x5EFA;&#x5B8C;&#x6210;&#x540E;&#x4FDD;&#x7559;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x7531;&#x7528;&#x6237;&#x8BBE;&#x7F6E;&#x5B58;&#x50A8;&#x8D26;&#x6237;&#x7684;&#x539F;&#x56E0;&#x3002;</p>
</blockquote>
<p>&#x6784;&#x5EFA;&#x7684;&#x57FA;&#x672C;&#x6B65;&#x9AA4;&#x662F;&#xFF1A;</p>
<ol>
<li>&#x521B;&#x5EFA;&#x8D44;&#x6E90;&#x7EC4;&#x3002;</li>
<li>&#x9A8C;&#x8BC1;&#x5E76;&#x90E8;&#x7F72;&#x865A;&#x62DF;&#x673A;&#x6A21;&#x677F;&#x3002;</li>
<li>&#x8FD0;&#x884C;&#x7528;&#x6237;&#x5B9A;&#x4E49;&#x7684;&#x914D;&#x7F6E;&#x5668;&#xFF1B;&#x901A;&#x5E38;&#x662F; shell &#x547D;&#x4EE4;&#x3002;</li>
<li>&#x5173;&#x95ED;&#x5E76;&#x4FDD;&#x5B58;&#x865A;&#x62DF;&#x673A;&#x3002;</li>
<li>&#x5220;&#x9664;&#x8D44;&#x6E90;&#x7EC4;&#x3002;</li>
<li>&#x5220;&#x9664;&#x4E34;&#x65F6;&#x865A;&#x62DF;&#x673A;&#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x78C1;&#x76D8;&#x3002;</li>
</ol>
<p>&#x7528;&#x4E8E;&#x6784;&#x5EFA;&#x7684;&#x6A21;&#x677F;&#x5F53;&#x524D;&#x5DF2;&#x5728; Packer &#x4EE3;&#x7801;&#x4E2D;&#x5B9A;&#x4E49;&#x3002;&#x5BF9;&#x4E8E; Linux&#x3001;Windows &#x548C; KeyVault &#x90FD;&#x6709;&#x5BF9;&#x5E94;&#x7684;&#x6A21;&#x677F;&#x3002;&#x6A21;&#x677F;&#x672C;&#x8EAB;&#x662F;&#x7528;&#x540D;&#x79F0;&#x3001;&#x5BC6;&#x7801;&#x3001;SSH &#x5BC6;&#x94A5;&#x3001;&#x8BC1;&#x4E66;&#x7B49;&#x7684;&#x5360;&#x4F4D;&#x7B26;&#x6A21;&#x677F;&#x5316;&#x7684;&#x3002;</p>
<h3 id="&#x4EC0;&#x4E48;&#x662F;&#x968F;&#x673A;&#x5316;">&#x4EC0;&#x4E48;&#x662F;&#x968F;&#x673A;&#x5316;</h3>
<p>Azure &#x751F;&#x6210;&#x5668;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x521B;&#x5EFA;&#x4EE5;&#x4E0B;&#x968F;&#x673A;&#x503C;&#x3002;</p>
<ul>
<li>&#x7BA1;&#x7406;&#x5458;&#x5BC6;&#x7801;&#xFF1A;&#x4F7F;&#x7528;&#x5BC6;&#x7801;&#x5B57;&#x6BCD;&#x8868;&#x7684;&#x968F;&#x673A; 32 &#x4E2A;&#x5B57;&#x7B26;&#x503C;&#x3002;</li>
<li>&#x8BC1;&#x4E66;&#xFF1A;&#x7528;&#x4E8E;&#x4FDD;&#x62A4; WinRM &#x901A;&#x4FE1;&#x7684; 2,048 &#x4F4D;&#x8BC1;&#x4E66;&#x3002;&#x8BC1;&#x4E66;&#x6709;&#x6548;&#x671F;&#x4E3A; 24 &#x5C0F;&#x65F6;&#xFF0C;&#x5927;&#x81F4;&#x4ECE;&#x8C03;&#x7528;&#x65F6;&#x95F4;&#x5F00;&#x59CB;&#x3002;</li>
<li>&#x8BC1;&#x4E66;&#x5BC6;&#x7801;&#xFF1A;&#x4E00;&#x4E2A;&#x7531; 32 &#x4E2A;&#x5BC6;&#x7801;&#x5B57;&#x6BCD;&#x8868;&#x4E2D;&#x5B57;&#x7B26;&#x7EC4;&#x6210;&#x7684;&#x968F;&#x673A;&#x503C;&#xFF0C;&#x4F7F;&#x7528;&#x7528;&#x4E8E;&#x4FDD;&#x62A4;&#x8BC1;&#x4E66;&#x79C1;&#x94A5;&#x3002;</li>
<li>&#x8BA1;&#x7B97;&#x540D;&#x79F0;&#xFF1A;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x7684; 15 &#x4E2A;&#x5B57;&#x7B26;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x4EE5; <code>pkrvm</code> &#x4E3A;&#x524D;&#x7F00;&#xFF1B;&#x865A;&#x62DF;&#x673A;&#x7684;&#x540D;&#x79F0;&#x3002;</li>
<li>&#x90E8;&#x7F72;&#x540D;&#x79F0;&#xFF1A;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x7684; 15 &#x4E2A;&#x5B57;&#x7B26;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x4EE5; <code>pkfdp</code> &#x4E3A;&#x524D;&#x7F00;&#xFF1B;&#x90E8;&#x7F72;&#x7684;&#x540D;&#x79F0;&#x3002;</li>
<li>KeyVault &#x540D;&#x79F0;&#xFF1A;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x7684; 15 &#x4E2A;&#x5B57;&#x7B26;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x524D;&#x7F00;&#x4E3A; <code>pkrkv</code>&#x3002;</li>
<li>NIC &#x540D;&#x79F0;&#xFF1A;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x7684; 15 &#x4E2A;&#x5B57;&#x7B26;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x4EE5; <code>pkrni</code> &#x4E3A;&#x524D;&#x7F00;&#x3002;</li>
<li>&#x516C;&#x5171; IP &#x540D;&#x79F0;&#xFF1A;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x7684; 15 &#x4E2A;&#x5B57;&#x7B26;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x524D;&#x7F00;&#x4E3A; <code>pkrip</code>&#x3002;</li>
<li>&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x78C1;&#x76D8;&#x540D;&#x79F0;&#xFF1A;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x7684; 15 &#x4E2A;&#x5B57;&#x7B26;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x4EE5; <code>pkros</code> &#x4E3A;&#x524D;&#x7F00;&#x3002;</li>
<li>&#x6570;&#x636E;&#x76D8;&#x540D;&#x79F0;&#xFF1A;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x7684; 15 &#x4E2A;&#x5B57;&#x7B26;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x4EE5; <code>pkrdd</code> &#x4E3A;&#x524D;&#x7F00;&#x3002;</li>
<li>&#x8D44;&#x6E90;&#x7EC4;&#x540D;&#x79F0;&#xFF1A;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x7684; 33 &#x4E2A;&#x5B57;&#x7B26;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x524D;&#x7F00;&#x4E3A; <code>packer-Resource-Group-</code>&#x3002;</li>
<li>&#x5B50;&#x7F51;&#x540D;&#x79F0;&#xFF1A;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x7684; 15 &#x4E2A;&#x5B57;&#x7B26;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x4EE5; <code>pkrsn</code> &#x4E3A;&#x524D;&#x7F00;&#x3002;</li>
<li>SSH &#x5BC6;&#x94A5;&#x5BF9;&#xFF1A;2,048 &#x4F4D;&#x975E;&#x5BF9;&#x79F0;&#x5BC6;&#x94A5;&#x5BF9;&#xFF1B;&#x53EF;&#x4EE5;&#x88AB;&#x7528;&#x6237;&#x6539;&#x5199;&#x3002;</li>
<li>&#x865A;&#x62DF;&#x7F51;&#x7EDC;&#x540D;&#x79F0;&#xFF1A;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x7684; 15 &#x4E2A;&#x5B57;&#x7B26;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x4EE5; <code>pkrvn</code> &#x4E3A;&#x524D;&#x7F00;&#x3002;</li>
<li>&#x7528;&#x4E8E;&#x968F;&#x673A;&#x503C;&#x7684;&#x9ED8;&#x8BA4;&#x5B57;&#x6BCD;&#x8868;&#x662F; <code>0123456789bcdfghjklmnpqrstvwxyz</code>&#x3002;&#x51CF;&#x5C11;&#x4E86;&#x5B57;&#x6BCD;&#x8868;&#xFF08;&#x6CA1;&#x6709;&#x5143;&#x97F3;&#x5B57;&#x6BCD;&#xFF09;&#x4EE5;&#x9632;&#x6B62;&#x4E0E; Azure &#x89C4;&#x8303;&#x63A7;&#x5236;&#x53D1;&#x751F;&#x51B2;&#x7A81;&#x3002;</li>
</ul>
<p>&#x7528;&#x4E8E;&#x968F;&#x673A;&#x503C;&#x7684;&#x5BC6;&#x7801;&#x5B57;&#x6BCD;&#x8868;&#x662F; <code>0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ</code>&#x3002;</p>
<h3 id="&#x5F03;&#x7528;&#x8B66;&#x544A;">&#x5F03;&#x7528;&#x8B66;&#x544A;</h3>
<p>&#x5F53;&#x60A8;&#x8FD0;&#x884C; Azure &#x6784;&#x5EFA;&#x5668;&#x65F6;&#xFF0C;&#x60A8;&#x53EF;&#x80FD;&#x4F1A;&#x770B;&#x5230;&#x4E00;&#x4E2A;&#x770B;&#x8D77;&#x6765;&#x5F88;&#x53EF;&#x6015;&#x7684;&#x5F03;&#x7528;&#x8B66;&#x544A;&#xFF1A;</p>
<pre class="language-"><code class="lang-text">==&gt; azure-arm: Warning: You are using Azure Packer Builder to create VHDs which
is being deprecated, consider using Managed Images. Learn more
http://aka.ms/packermanagedimage
</code></pre>
<p>&#x4E0D;&#x8981;&#x614C;&#x3002;&#x60A8;&#x7684;&#x6784;&#x5EFA;&#x4E0D;&#x4F1A;&#x5728;&#x77ED;&#x65F6;&#x95F4;&#x5185;&#x505C;&#x6B62;&#x5DE5;&#x4F5C;&#x3002;</p>
<p>&#x4ECE;&#x957F;&#x8FDC;&#x6765;&#x770B;&#xFF0C;Azure &#x5E0C;&#x671B;&#x6BCF;&#x4E2A;&#x4EBA;&#x90FD;&#x8F6C;&#x5411;&#x4F7F;&#x7528;&#x6258;&#x7BA1;&#x955C;&#x50CF;&#x548C;&#x6258;&#x7BA1;&#x78C1;&#x76D8;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4EEC;&#x9690;&#x85CF;&#x4E86;&#x5B58;&#x50A8;&#x5E10;&#x6237;&#x6027;&#x80FD;&#x65B9;&#x9762;&#x7684;&#x590D;&#x6742;&#x6027;&#x3002;&#x6258;&#x7BA1;&#x78C1;&#x76D8;&#x53EF;&#x4EE5;&#x5BFC;&#x51FA;&#x5230; VHD&#x3002;&#x5982;&#x679C;&#x5F03;&#x7528;&#x8BE5;&#x65B9;&#x6CD5;&#xFF0C;&#x5C06;&#x7531;&#x5E2E;&#x52A9;&#x7EF4;&#x62A4; Packer &#x7684; Microsoft &#x56E2;&#x961F;&#x4EE5;&#x5BF9;&#x7528;&#x6237;&#x900F;&#x660E;&#x7684;&#x8FC7;&#x7A0B;&#x6765;&#x5B8C;&#x6210;&#x3002;</p>
<p>&#x5C06;&#x6765;&#xFF0C;Packer &#x53EF;&#x80FD;&#x4F1A;&#x79FB;&#x9664; VHD &#x652F;&#x6301;&#xFF0C;&#x4F46;&#x4F1A;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x5BFC;&#x51FA;&#x5230;&#x5B58;&#x50A8;&#x5E10;&#x6237;&#x7684;&#x540E;&#x5904;&#x7406;&#x5668;&#x3002;</p>
<h3 id="windows">Windows</h3>
<p>Windows &#x5B9E;&#x73B0;&#x4E0E; Linux &#x6784;&#x5EFA;&#x975E;&#x5E38;&#x76F8;&#x4F3C;&#xFF0C;&#x4E0D;&#x540C;&#x4E4B;&#x5904;&#x5728;&#x4E8E;&#x5B83;&#x90E8;&#x7F72;&#x4E86;&#x4E00;&#x4E2A;&#x6A21;&#x677F;&#x6765;&#x914D;&#x7F6E; KeyVault&#x3002; Packer &#x4F7F;&#x7528; WinRM &#x534F;&#x8BAE;&#x4E0E; Windows VM &#x901A;&#x4FE1;&#x3002; Azure &#x4E0A;&#x7684; Windows VM &#x9ED8;&#x8BA4;&#x4E3A; WinRM &#x4F7F;&#x7528;&#x57FA;&#x4E8E;&#x5BC6;&#x7801;&#x548C;&#x8BC1;&#x4E66;&#x7684;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x3002;&#x5BC6;&#x7801;&#x5F88;&#x5BB9;&#x6613;&#x901A;&#x8FC7; VM ARM &#x6A21;&#x677F;&#x8BBE;&#x7F6E;&#xFF0C;&#x4F46;&#x8BC1;&#x4E66;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x5B58;&#x50A8;&#x4ECB;&#x8D28;&#x3002; Azure &#x7684;&#x8BC1;&#x4E66;&#x5B58;&#x50A8;&#x4ECB;&#x8D28;&#x662F; KeyVault&#x3002;&#x8BC1;&#x4E66;&#x5C06;&#x4E0A;&#x4F20;&#x5230;&#x4E0E;&#x865A;&#x62DF;&#x673A;&#x5728;&#x540C;&#x4E00;&#x8D44;&#x6E90;&#x7EC4;&#x4E2D;&#x9884;&#x5148;&#x914D;&#x7F6E;&#x597D;&#x7684;&#x7684;&#x65B0; KeyVault &#x5185;&#x3002;&#x90E8;&#x7F72; Windows &#x865A;&#x62DF;&#x673A;&#x65F6;&#xFF0C;&#x5B83;&#x4F1A;&#x94FE;&#x63A5;&#x5230; KeyVault &#x4E2D;&#x7684;&#x8BC1;&#x4E66;&#xFF0C;Azure &#x5C06;&#x786E;&#x4FDD;&#x8BC1;&#x4E66;&#x4F5C;&#x4E3A;&#x90E8;&#x7F72;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x6CE8;&#x5165;&#x3002;
Windows &#x6784;&#x5EFA;&#x7684;&#x57FA;&#x672C;&#x6B65;&#x9AA4;&#x662F;&#xFF1A;</p>
<ol>
<li>&#x521B;&#x5EFA;&#x8D44;&#x6E90;&#x7EC4;&#x3002;</li>
<li>&#x9A8C;&#x8BC1;&#x5E76;&#x90E8;&#x7F72; KeyVault &#x6A21;&#x677F;&#x3002;</li>
<li>&#x9A8C;&#x8BC1;&#x5E76;&#x90E8;&#x7F72; VM &#x6A21;&#x677F;&#x3002;</li>
<li>&#x6267;&#x884C;&#x89C4;&#x5B9A; - &#x7531;&#x7528;&#x6237;&#x5B9A;&#x4E49;&#xFF1B;&#x901A;&#x5E38;&#x662F; shell &#x547D;&#x4EE4;&#x3002;</li>
<li>&#x5173;&#x95ED;&#x5E76;&#x6355;&#x83B7; VM&#x3002;</li>
<li>&#x5220;&#x9664;&#x8D44;&#x6E90;&#x7EC4;&#x3002;</li>
<li>&#x5220;&#x9664;&#x4E34;&#x65F6; VM &#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x78C1;&#x76D8;&#x3002;
Windows &#x6784;&#x5EFA;&#x9700;&#x8981;&#x4E24;&#x4E2A;&#x6A21;&#x677F;&#x548C;&#x4E24;&#x4E2A;&#x90E8;&#x7F72;&#x3002;&#x4E0D;&#x5E78;&#x7684;&#x662F;&#xFF0C;KeyVault &#x548C; VM &#x4E0D;&#x80FD;&#x540C;&#x65F6;&#x90E8;&#x7F72;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x4E24;&#x4E2A;&#x6A21;&#x677F;&#x548C;&#x90E8;&#x7F72;&#x3002;&#x90E8;&#x7F72; KeyVault &#x6A21;&#x677F;&#x6240;&#x9700;&#x7684;&#x65F6;&#x95F4;&#x6781;&#x5C11;&#xFF0C;&#x56E0;&#x6B64;&#x603B;&#x4F53;&#x5F71;&#x54CD;&#x5F88;&#x5C0F;&#x3002;</li>
</ol>
<p>&#x6709;&#x5173;&#x66F4;&#x591A;&#x793A;&#x4F8B;&#xFF0C;&#x8BF7;&#x53C2;&#x9605; Packer &#x9879;&#x76EE;&#x4E2D;&#x7684;<a href="https://github.com/hashicorp/packer-plugin-azure/tree/main/example" target="_blank">&#x793A;&#x4F8B;&#x6587;&#x4EF6;&#x5939;</a>&#x3002;</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="overview.html" class="navigation navigation-prev " aria-label="Previous page: Azure">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../5.alicloud-ecs.html" class="navigation navigation-next " aria-label="Next page: Alicloud">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"ARM","level":"1.8.4.1","depth":3,"next":{"title":"Alicloud","level":"1.8.5","depth":2,"path":"7.builders/5.alicloud-ecs.md","ref":"7.builders/5.alicloud-ecs.md","articles":[]},"previous":{"title":"Azure","level":"1.8.4","depth":2,"path":"7.builders/4.azure/overview.md","ref":"7.builders/4.azure/overview.md","articles":[{"title":"ARM","level":"1.8.4.1","depth":3,"path":"7.builders/4.azure/1.arm.md","ref":"7.builders/4.azure/1.arm.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["-highlight","prism","prism-themes","fontsettings","sharing","-lunr","-search","search-pro","livereload","image-captions","sitemap-general"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"css":["prism-themes/themes/prism-vsc-dark-plus.css"],"lang":{"shell":"bash","cmd":"bash"}},"livereload":{},"search-pro":{},"sitemap-general":{"prefix":"https://lonegunmanb.github.io/packer-handbook/"},"fontsettings":{"family":"sans","size":2,"theme":"white"},"prism-themes":{},"sharing":{"all":["facebook","google","twitter","weibo","instapaper"],"facebook":true,"google":false,"instapaper":false,"twitter":true,"vk":false,"weibo":false},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":true},"image-captions":{"caption":"图 _PAGE_LEVEL_/_PAGE_IMAGE_NUMBER_ - _CAPTION_","variable_name":"_pictures"}},"theme":"default","author":"大可不加冰","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{"_pictures":[{"backlink":"index.html#fig1.1.1","level":"1.1","list_caption":"Figure: HashiStack","alt":"HashiStack","nro":1,"url":"https://raw.githubusercontent.com/lonegunmanb/packer-handbook-pic/main/Full%2520Stack_onBlack%25402x.png","index":1,"caption_template":"图 _PAGE_LEVEL_/_PAGE_IMAGE_NUMBER_ - _CAPTION_","label":"HashiStack","attributes":{},"skip":false,"key":"1.1.1"},{"backlink":"11.postscript/1.html#fig1.12.1.1","level":"1.12.1","list_caption":"Figure: 芯片战争","alt":"芯片战争","nro":2,"url":"https://raw.githubusercontent.com/lonegunmanb/packer-handbook-pic/main/20230715201209.png","index":1,"caption_template":"图 _PAGE_LEVEL_/_PAGE_IMAGE_NUMBER_ - _CAPTION_","label":"芯片战争","attributes":{},"skip":false,"key":"1.12.1.1"},{"backlink":"11.postscript/1.html#fig1.12.1.2","level":"1.12.1","list_caption":"Figure: 芯片的第一个实际应用——激光制导炸弹炸断清化大桥","alt":"芯片的第一个实际应用——激光制导炸弹炸断清化大桥","nro":3,"url":"https://raw.githubusercontent.com/lonegunmanb/packer-handbook-pic/main/20230715211713.png","index":2,"caption_template":"图 _PAGE_LEVEL_/_PAGE_IMAGE_NUMBER_ - _CAPTION_","label":"芯片的第一个实际应用——激光制导炸弹炸断清化大桥","attributes":{},"skip":false,"key":"1.12.1.2"},{"backlink":"11.postscript/1.html#fig1.12.1.3","level":"1.12.1","list_caption":"Figure: Ray Dalio 在《经济机器是如何运行的》动画中总结，人类社会的经济发展短期内受货币和财政政策影响，但在长周期内由生产效率的发展来决定","alt":"Ray Dalio 在《经济机器是如何运行的》动画中总结，人类社会的经济发展短期内受货币和财政政策影响，但在长周期内由生产效率的发展来决定","nro":4,"url":"https://raw.githubusercontent.com/lonegunmanb/packer-handbook-pic/main/20230715213557.png","index":3,"caption_template":"图 _PAGE_LEVEL_/_PAGE_IMAGE_NUMBER_ - _CAPTION_","label":"Ray Dalio 在《经济机器是如何运行的》动画中总结，人类社会的经济发展短期内受货币和财政政策影响，但在长周期内由生产效率的发展来决定","attributes":{},"skip":false,"key":"1.12.1.3"}]},"title":"《Packer 中文手册》","gitbook":"*"},"file":{"path":"7.builders/4.azure/1.arm.md","mtime":"2023-10-03T14:16:23.258Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2023-10-06T12:25:09.052Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    

    </body>
</html>

